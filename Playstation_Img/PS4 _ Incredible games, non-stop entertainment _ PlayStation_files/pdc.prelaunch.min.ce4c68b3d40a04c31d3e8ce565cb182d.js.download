/*!
 * @sie/designkit
 * @copyright     2023 Sony Interactive Entertainment LLC, all rights reserved
 */

!function(){"use strict";function e(n){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function n(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function t(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}var i={LABELS:{EU_COOKIE:"eucookiepreference",PREFERENCE_ACCEPT:"accept",PREFERENCE_REJECT:"reject"},DOMAIN:".playstation.com",COOKIE_AGE:3650,UH:"userinfo",ORACLE:{e1:"isSignedIn_e",np:"isSignedIn",mgmt:"isSignedIn_m"},SUBSCRIPTION:{e1:"pdcsi_e",np:"pdcsi",mgmt:"pdcsi_m"}},a=({IS_PORTRAIT:(window.matchMedia&&matchMedia("(orientation: portrait)")||{}).matches,IS_LANDSCAPE:(window.matchMedia&&matchMedia("(orientation: landscape)")||{}).matches,IS_MOBILE:(window.matchMedia&&matchMedia("(max-width: 767px)")||{}).matches,IS_MOBILE_PORTRAIT:(window.matchMedia("(max-width: 767px) and (orientation: portrait)")||{}).matches,IS_TABLET:(window.matchMedia&&matchMedia("(min-width: 768px)")||{}).matches,IS_DESKTOP:(window.matchMedia&&matchMedia("(min-width: 1024px)")||{}).matches},{IS_PORTRAIT:window.matchMedia&&matchMedia("(orientation: portrait)")||{},IS_LANDSCAPE:window.matchMedia&&matchMedia("(orientation: landscape)")||{},IS_JETSTREAM_MOBILE:window.matchMedia&&matchMedia("(max-width: 699px)")||{},IS_MOBILE:window.matchMedia&&matchMedia("(max-width: 767px)")||{},IS_MOBILE_PORTRAIT:window.matchMedia("(max-width: 767px) and (orientation: portrait)")||{},IS_TABLET:window.matchMedia&&matchMedia("(min-width: 768px)")||{},IS_TABLET_LG:window.matchMedia&&matchMedia("(min-width: 1024px)")||{},IS_LAPTOP:window.matchMedia&&matchMedia("(min-width: 1367px)")||{},IS_DESKTOP:window.matchMedia&&matchMedia("(min-width: 1920px)")||{},IS_MAX_TABLET:window.matchMedia&&matchMedia("(max-width: 1023px)")||{},IS_JUST_TABLET:window.matchMedia&&matchMedia("(min-width: 768px) and (max-width: 1365px)")||{},IS_JUST_LAPTOP:window.matchMedia&&matchMedia("(min-width: 1366px) and (max-width: 1919px)")||{}}),c=({IS_PORTRAIT:a.IS_PORTRAIT.matches,IS_LANDSCAPE:a.IS_LANDSCAPE.matches,IS_JETSTREAM_MOBILE:a.IS_JETSTREAM_MOBILE.matches,IS_MOBILE:a.IS_MOBILE.matches,IS_MOBILE_PORTRAIT:a.IS_MOBILE_PORTRAIT.matches,IS_TABLET:a.IS_TABLET.matches,IS_MAX_TABLET:a.IS_MAX_TABLET.matches,IS_TABLET_LG:a.IS_TABLET_LG.matches,IS_LAPTOP:a.IS_LAPTOP.matches,IS_DESKTOP:a.IS_DESKTOP.matches},{EMPTY_LABEL:"empty"}),d=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:180,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".playstation.com";if(n){var i=new Date;i.setTime(i.getTime()+60*t*1e3),document.cookie="".concat(e,"=").concat(encodeURIComponent(n),"; expires=").concat(i.toUTCString(),";path=/; domain=").concat(o,";secure")}},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=document.cookie.match(new RegExp("(^| )".concat(e,"=([^;]*)(;|$)")));return n?decodeURIComponent(n[2]):null},u=function(e){var n=null;try{n=JSON.parse(e)}catch(e){}return n},s={SEGMENTS_COOKIE:"gpdcTg"},l="_gpdc_anonId",m=function(){function e(){n(this,e),this.init()}return o(e,[{key:"getTargetSegments",value:function(){var e=$("#targetSegments");if(e.length){var n=JSON.parse(e.html()),t=n.reduce(function(e,n){return e[n.id]=n.name,e},{});return t}}},{key:"getUserSegments",value:function(e){var n=u(e);if(n&&n.length)return n}},{key:"getMatchingSegments",value:function(e,n){var t={};return n.map(function(n){e[n]&&(t[e[n]]=1)}),t}},{key:"getSegmentsProvider",value:function(e){return{name:"segmentsProvider",version:"1.0.0",provider:function(n){"function"==typeof n&&n(null,e)}}}},{key:"initSegmentsProvider",value:function(e,n){e&&(window.targetGlobalSettings={dataProviders:[n]})}},{key:"init",value:function(){var e=r(s.SEGMENTS_COOKIE);if(e){var n=this.getTargetSegments();if(n){var t=this.getUserSegments(e),o=this.getMatchingSegments(n,t),i=this.getSegmentsProvider(o);this.initSegmentsProvider(o,i),_gpdc.Logger.logInitializer("prelaunch","components","Target")}}}}]),e}(),g="\nImplementation error!! Please contact designkit web team for assistance.",p=function(){function t(){throw n(this,t),TypeError("new of abstract class Logger")}return o(t,null,[{key:"logInitializer",value:function(e,n,t){var o="__DK_PACKAGES",i=window[o]?window[o]:{},a=i[e]?i[e]:{common:[],components:[]};a[n].push(t),i[e]=a,window[o]=i}},{key:"groupStart",value:function(n){void 0!==("undefined"==typeof console?"undefined":e(console))&&"function"==typeof console.groupCollapsed&&_gpdc.Logger.shouldDebug()&&console.groupCollapsed("designkit - ".concat(n))}},{key:"groupEnd",value:function(){void 0!==("undefined"==typeof console?"undefined":e(console))&&"function"==typeof console.groupEnd&&_gpdc.Logger.shouldDebug()&&console.groupEnd()}},{key:"shouldDebug",value:function(){var e=(window.location.search||"").indexOf("_dkDebug=true")>-1;return window._dkDebug||e}},{key:"log",value:function(){if(_gpdc.Logger.shouldDebug()){var n=void 0!==("undefined"==typeof console?"undefined":e(console))&&"function"==typeof console.info;if(n){for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];var a=[].splice.call(o,0);a[1]&&"object"===e(a[1])&&(a[1]=JSON.stringify(a[1],null,2)),console.info("designkit - ".concat(Array.prototype.slice.call(a).join("\n")))}}}},{key:"warn",value:function(n,t){void 0!==("undefined"==typeof console?"undefined":e(console))&&"function"==typeof console.warn&&console.warn("designkit - ".concat(n).concat(t&&g||""))}},{key:"error",value:function(n,t){void 0!==("undefined"==typeof console?"undefined":e(console))&&"function"==typeof console.error&&console.error("designkit - ".concat(n).concat(t&&g||""))}}]),t}(),h=function(e){var n=Array.isArray(e)?e:[e];n.map(function(e){return e()})},w=function(e,n){_gpdc.elements.$document.ready(function(){window._dkDebug=!1,window._gpdc&&_gpdc.user&&"undefined"!=typeof _gpdc.user.isLoggedIn?h(e):_gpdc.elements.$document.one("userInfoSet.dkComponents",function(){return h(e)})})},f=function(){function e(){n(this,e),this.cookie=i,window._gpdcEvidonQueue=[],this.init()}return o(e,[{key:"setEvidonCookie",value:function(e){d(this.cookie.LABELS.EU_COOKIE,e,this.cookie.COOKIE_AGE,this.cookie.DOMAIN)}},{key:"setConsent",value:function(e){this.setEvidonCookie(e);var n=new CustomEvent("evidonConsentState",{detail:{consent:e},bubbles:!0,cancelable:!0});document.dispatchEvent(n)}},{key:"setEvent",value:function(e,n){var t=function(){_gpdc.analytics.event.addGDLEvent("click",e,{moduleName:"cookie-banner",elementType:"button",assetName:c.EMPTY_LABEL,linkUrl:c.EMPTY_LABEL,label:"accept",userActionFlag:!0},n)};return window._gpdc&&_gpdc.analytics?void t():void window._gpdcEvidonQueue.push(t)}},{key:"init",value:function(){var e=this;window.evidon=window.evidon||{},window.evidon.launchConsentAccepted=function(){e.setConsent(e.cookie.LABELS.PREFERENCE_ACCEPT),window.evidon.banner&&e.setEvent("accept",$("#_evidon-accept-button")),_gpdc.Logger.log("Evidon launchConsentAccepted called!!")},window.evidon.launchConsentWithdrawn=function(){e.setConsent(e.cookie.LABELS.PREFERENCE_REJECT),_gpdc.Logger.log("Evidon launchConsentWithdrawn called!!")},window.evidon.launchConsentDeclined=function(){window.evidon.notice.dropSuppressionCookie(1),e.setConsent(e.cookie.LABELS.PREFERENCE_REJECT),_gpdc.Logger.log("Evidon launchConsentDeclined called!!")},_gpdc.Logger.logInitializer("core","common","Evidon")}}]),e}(),E=function(){var e=localStorage.getItem(l);e||localStorage.setItem(l,_())},_=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==n?t:3&t|8).toString(16)})};!function(e){window._gpdc=window._gpdc||{},window._dkDebug=!1,_gpdc.Logger=p,_gpdc.InitializeComponents=w,new m,new f,E()}(jQuery)}();
