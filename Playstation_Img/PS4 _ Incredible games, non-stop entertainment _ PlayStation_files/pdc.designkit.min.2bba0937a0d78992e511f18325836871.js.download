/*!
 * @sie/designkit
 *
 * @version       1.0.6 - Thu, 01 Jun 2023 17:36:53 GMT (release_june_6_2023)
 * @license       UNLICENSED
 * @copyright     2023 Sony Interactive Entertainment LLC, all rights reserved
 */

!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function n(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function r(e){throw new Error('"'+e+'" is read-only')}function s(e,t){return d(e)||g(e,t)||h(e,t)||v()}function c(e){return l(e)||u(e)||h(e)||f()}function l(e){if(Array.isArray(e))return p(e)}function d(e){if(Array.isArray(e))return e}function u(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function g(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,i=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(a=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw o}}return n}}function h(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function y(e,t){return t={exports:{}},e(t,t.exports),t.exports}var k,b={PROD:/(www|wwwglobal|author)\.playstation\.com/i,STAGE:/(author\.stage|stage)\.playstation\.com/i,PREVIEW:/preview\.www\.playstation\.com/i,WWWGLOBAL:/wwwglobal\.playstation\.com/i},_={navFooter:"navFooter",userState:"userState",gpdcUser:"gpdcUser"},C={IS_PORTRAIT:(window.matchMedia&&matchMedia("(orientation: portrait)")||{}).matches,IS_LANDSCAPE:(window.matchMedia&&matchMedia("(orientation: landscape)")||{}).matches,IS_MOBILE:(window.matchMedia&&matchMedia("(max-width: 767px)")||{}).matches,IS_MOBILE_PORTRAIT:(window.matchMedia("(max-width: 767px) and (orientation: portrait)")||{}).matches,IS_TABLET:(window.matchMedia&&matchMedia("(min-width: 768px)")||{}).matches,IS_DESKTOP:(window.matchMedia&&matchMedia("(min-width: 1024px)")||{}).matches},T={IS_PORTRAIT:window.matchMedia&&matchMedia("(orientation: portrait)")||{},IS_LANDSCAPE:window.matchMedia&&matchMedia("(orientation: landscape)")||{},IS_JETSTREAM_MOBILE:window.matchMedia&&matchMedia("(max-width: 699px)")||{},IS_MOBILE:window.matchMedia&&matchMedia("(max-width: 767px)")||{},IS_MOBILE_PORTRAIT:window.matchMedia("(max-width: 767px) and (orientation: portrait)")||{},IS_TABLET:window.matchMedia&&matchMedia("(min-width: 768px)")||{},IS_TABLET_LG:window.matchMedia&&matchMedia("(min-width: 1024px)")||{},IS_LAPTOP:window.matchMedia&&matchMedia("(min-width: 1367px)")||{},IS_DESKTOP:window.matchMedia&&matchMedia("(min-width: 1920px)")||{},IS_MAX_TABLET:window.matchMedia&&matchMedia("(max-width: 1023px)")||{},IS_JUST_TABLET:window.matchMedia&&matchMedia("(min-width: 768px) and (max-width: 1365px)")||{},IS_JUST_LAPTOP:window.matchMedia&&matchMedia("(min-width: 1366px) and (max-width: 1919px)")||{}},w={IS_PORTRAIT:T.IS_PORTRAIT.matches,IS_LANDSCAPE:T.IS_LANDSCAPE.matches,IS_JETSTREAM_MOBILE:T.IS_JETSTREAM_MOBILE.matches,IS_MOBILE:T.IS_MOBILE.matches,IS_MOBILE_PORTRAIT:T.IS_MOBILE_PORTRAIT.matches,IS_TABLET:T.IS_TABLET.matches,IS_MAX_TABLET:T.IS_MAX_TABLET.matches,IS_TABLET_LG:T.IS_TABLET_LG.matches,IS_LAPTOP:T.IS_LAPTOP.matches,IS_DESKTOP:T.IS_DESKTOP.matches},A={EMPTY_LABEL:"empty"},E="javascript:void(0);",L=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:180,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".playstation.com";if(t){var i=new Date;i.setTime(i.getTime()+60*n*1e3),document.cookie="".concat(e,"=").concat(encodeURIComponent(t),"; expires=").concat(i.toUTCString(),";path=/; domain=").concat(a,";secure")}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=document.cookie.match(new RegExp("(^| )".concat(e,"=([^;]*)(;|$)")));return t?decodeURIComponent(t[2]):null},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".playstation.com";e&&(document.cookie="".concat(e,"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain=").concat(t,";"))},x=function(e){var t=null;try{t=JSON.parse(e)}catch(e){}return t},P=function(e,t,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=t.offset().top,o=400;a&&(o=800,window.scrollTo(0,e.offset().top)),e.animate({scrollTop:i},{duration:o,step:function(e,n){var a=t.offset().top;n.end!=a&&(n.end=a)}}).animate({scrollTop:i-n},{duration:200,step:function(e,a){var i=t.offset().top-n;a.end!=i&&(a.end=i)}})},M=function(e,t){return t?t.find(e):$(e)},D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"buttonblock",n=e.parents("[data-component]");return n.length?$(n.get().reverse()[0]).data("component"):t},O=function(e){return e.toString().trim().replace(/[^a-z-_0-9]/gi,"")},N=function(){var e={mobile:30,desktop:20,default:200},t=C.IS_MOBILE?e.mobile:null,n=C.IS_DESKTOP?e.mobile:e.desktop,a=Math.round(window.innerHeight*(t||n)/100)||e.default;return"".concat(isNaN(a)||a<e.default?e.default:a,"px")},B=function(e){return!(!e||e===E)},G=function(){function t(){e(this,t),this.$els={win:_gpdc.elements.$window,htmlBody:$("html, body"),dkNav:$("#sony-bar.dk-nav__wrapper"),nav:$("#shared-nav-root #shared-nav-container"),tertiary:$("#jetstream-tertiary-nav .tertiary-container")},this.EVENT_CHANGE="hashchange.dkHashAnchor",this.EVENT_LOAD="load.dkHashAnchor",this.EVENT_CLICK="click.dkHashAnchor",this.pageLoad=!0,this.hashRegex=new RegExp("^#")}return n(t,[{key:"bind",value:function(){this.onHashChange=this.onHashChange.bind(this),this.onHashAnchorClick=this.onHashAnchorClick.bind(this)}},{key:"init",value:function(){var e=this;this.$els.win.on(this.EVENT_CHANGE,this.onHashChange),"complete"===document.readyState?(window.scrollTo(0,0),this.highlightTertiaryLink(),this.$els.win.trigger(this.EVENT_CHANGE)):this.$els.win.on(this.EVENT_LOAD,function(){return window.scrollTo(0,0),e.highlightTertiaryLink(),e.$els.win.trigger(e.EVENT_CHANGE)});var t='a[href^="#"]';$("#gdk__content ".concat(t)).on(this.EVENT_CLICK,this.onHashAnchorClick),this.$els.tertiary.on(this.EVENT_CLICK,t,this.onHashAnchorClick),_gpdc.Logger.logInitializer("core","common","Hash Anchor Plugin")}},{key:"onHashAnchorClick",value:function(e){var t=$(e.currentTarget).attr("href")||"";if(location.href.includes(t)&&t.length>1)return this.scrollToElementByHash(t),!1}},{key:"onHashChange",value:function(e){var t=window.location.hash;if(t){e.preventDefault();var n=window.htmlEncode(t);return n.includes("?")?void this.sanitizeHashUrl(n):void this.scrollToElementByHash(n)}}},{key:"scrollToElementByHash",value:function(e){e=O(e),e=this.hashRegex.test(e)?e:"#".concat(e);var t=$("".concat(e,', [name="').concat(e.substring(1),'"]')).first();if(t.length){var n=(t.offset().top,this.calculateNavigationOffset());location.href.includes(e)&&P(this.$els.htmlBody,t,n)}}},{key:"highlightTertiaryLink",value:function(){var e=window.location.hash;if(!this.pageLoad||!e||"#"===e||!this.$els.tertiary.length)return void(this.pageLoad=!1);var t=window.htmlEncode(e);this.pageLoad=!1;var n=this.$els.tertiary.find(".tertiary-tab__link"),a=this.$els.tertiary.find('.tertiary-tab__link[href="'.concat(t,'"]'));n.length&&a.length&&(n.removeClass("tertiary-tab__link--active"),a.addClass("tertiary-tab__link--active"))}},{key:"calculateNavigationOffset",value:function(){var e=0;return this.$els.dkNav.length&&(e+=this.$els.dkNav.outerHeight()),this.$els.nav.length&&(e+=this.$els.nav.outerHeight()),this.$els.tertiary.length&&(e+=this.$els.tertiary.outerHeight()),e}},{key:"sanitizeHashUrl",value:function(e){var t=e.split("?");if(t){var n="".concat(location.origin).concat(location.pathname);window.location.replace("".concat(n,"?").concat(t[1]||"").concat(t[0]||""))}}}]),t}(),R=function(){function t(){e(this,t),this.$els={win:_gpdc.elements.$window},this.DISABLE_AUTOPLAY_CLASS="no-autoplay",this.videoEls=M('[data-component="live-image"], [data-component="bg-video"]'),this.EVENT_KEYDOWN="keydown",this.init()}return n(t,[{key:"init",value:function(){this.videoEls.length&&(this.$els.win.one(this.EVENT_KEYDOWN,$.proxy(this.onTabPressed,this)),_gpdc.Logger.logInitializer("core","common","Disable Autoplay on Tab Press Plugin"))}},{key:"onTabPressed",value:function(e){var t=e.keyCode||e.which;9===t&&(_gpdc.elements.$body.addClass(this.DISABLE_AUTOPLAY_CLASS),this.videoEls.each(function(e,t){$(t).find("video").each(function(e,t){var n=$(t);n.data("auto-pause-play",!1),n.removeAttr("autoplay"),n.closest(".media-block").addClass("+inline-video--paused"),t.pause()})}))}}]),t}(),F=function(){function t(){e(this,t),this.init()}return n(t,[{key:"init",value:function(){if(window.lozad){var e=lozad(".lozad",{rootMargin:N(),threshold:0,loaded:function(e){e.classList.add("lazy-loaded")}});e.observe(),_gpdc.components.lozad={_observer:e}}_gpdc.Logger.logInitializer("core","common","Lozad")}}]),t}(),U={INPUTS_RESERVED_KEY_CODES:[8,9,16,37,38,39,40],INLINE_VIDEO_WAIT:500,DTM_IGNORE_EVENT:"ignore-dtm-click-event",COMPONENT_INSTANCE_ID_ATTR:"uuid"},V={EMBED_URL:"https://www.youtube.com/embed/"},j={endpoint:_gpdc.elements.$body.data("wc-api"),arkhamAPIHost:_gpdc.elements.$body.data("arkham-api"),arkhamAPIPath:"/api/session/v1/signin?redirect_uri=CURRENT_PAGE_URL&flow=web:walletAdmin",loadingClass:"loading",loadedAction:"checkout_app_visible",loginAction:"checkout_signin_required",pswrdVerifAction:"checkout_password_verification_required",closeActions:["checkout_cart_cancel","checkout_continue_shopping","checkout_error_dismiss","checkout_thankyou_dismiss"]},H=function(e){return e.includes(z.newStoreUrl)||e.includes(z.pdcDirectUrl)},z={btnBlock:".btn-block",btnBlockGated:".btn-block [data-age-gated]",btnBlockGatedForce:".btn-block [data-force-age-gate]",btnLinkSelector:'.btn-block [class^="cta__"]:not(.cta__inner), .btn-block .text-link',btnLinkV2Selector:".btn--cta__btn-container .btn--cta, .btn--cta__btn-container .text-link",btnVideoSelector:".btn-block [data-video-dam], .btn-block [data-video-youtube]",btnPSNLogin:'[data-manual-login="true"]',btnLoyalty:'[data-loyalty-program="true"]',btnAgeGateSelector:".btn-block .age-gate__input-btn",oldStoreUrl:"store.sonyentertainmentnetwork",newStoreUrl:"store.playstation",pdcDirectUrl:"direct.playstation",consoleUrlPrefix:{product:"psns:browse?product=",category:"psns:browse?category="}},K={pictureTag:{lower:'<source srcset="IMG_SRC_DESKTOP?$400pxDESKTOP_TRANSPARENT" media="(min-width: 768px)">\n                    <source srcset="IMG_SRC_MOBILE?$200pxMOBILE_TRANSPARENT" media="(min-width: 320px)">\n                    <img src="IMG_SRC_DESKTOP?$100pxDESKTOP_TRANSPARENT">',main:'<source srcset="IMG_SRC_DESKTOP?$1600pxDESKTOP_TRANSPARENT" media="(min-width: 1024px)">\n                    <source srcset="IMG_SRC_DESKTOP?$1200pxDESKTOP_TRANSPARENT" media="(min-width: 768px)">\n                    <source srcset="IMG_SRC_MOBILE?$800pxMOBILE_TRANSPARENT" media="(min-width: 320px)">\n                    <img src="IMG_SRC_DESKTOP?$100pxDESKTOP_TRANSPARENT">',fullscreen:'<source srcset="IMG_SRC_DESKTOP?$4000pxDESKTOP_TRANSPARENT" media="(min-width: 3000px)">\n                    <source srcset="IMG_SRC_DESKTOP?$2400pxDESKTOP_TRANSPARENT" media="(min-width: 1367px)">\n                    <source srcset="IMG_SRC_DESKTOP?$1600pxDESKTOP_TRANSPARENT" media="(min-width: 1024px)">\n                    <source srcset="IMG_SRC_DESKTOP?$1200pxDESKTOP_TRANSPARENT" media="(min-width: 768px)">\n                    <source srcset="IMG_SRC_MOBILE?$800pxMOBILE_TRANSPARENT" media="(min-width: 320px)">\n                    <img src="IMG_SRC_DESKTOP?$100pxDESKTOP_TRANSPARENT">'}},W={COOKIE_NAME:"gpdc_gated",TYPE_TEMPLATE_ID_MAP:{SIGN_IN:"#age-gate__user-sign-in-required",DOB:"#age-gate__user-input-required",SHALL_NOT_PASS:"#age-gate__user-shall-not-pass"},CONTENT:"#gdk__content .cmp-container",FIELDS:{y:".year",m:".month",d:".day"}},Y=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_.userState;e(this,t),this.hashAnchor=new G,this.userStateStorage=n}return n(t,[{key:"save",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U.COMPONENT_INSTANCE_ID_ATTR,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e&&(sessionStorage.setItem(this.userStateStorage,JSON.stringify({idAttr:t,value:e,cellIndex:n})),_gpdc.Logger.log("User State has been saved in sessionStorage for element with id: ".concat(e)))}},{key:"clear",value:function(){sessionStorage.removeItem(this.userStateStorage)}},{key:"retrieve",value:function(){var e=this,t=sessionStorage.getItem(this.userStateStorage);if(t){var n=x(t)||{},a=n.idAttr,i=n.value,o=n.cellIndex,r=void 0===o?null:o;if(sessionStorage.removeItem(this.userStateStorage),_gpdc.user&&_gpdc.user.isLoggedIn&&a&&i){var s=$("[data-".concat(a,'="').concat(i,'"]'));s.length&&(s.data(U.DTM_IGNORE_EVENT,!0),setTimeout(function(){e.hashAnchor.$els.htmlBody.animate({scrollTop:s.offset().top-e.hashAnchor.calculateNavigationOffset()},0),r>=0&&s.data("carousel")?e.selectCarouselElement(s,r):s.data("pxp-action")?e.handleExpWidgetReopen(s):s.get(0).click()},200))}}}},{key:"selectCarouselElement",value:function(e,t){if("image-gallery"===e.data("component")){var n=e.find('[data-component="image-block"]:eq('.concat(t,")")).get(0);return void(n&&n.click())}var a=(e.data("flickity")||{}).cells,i=a&&a[t]?$(a[t].element):null;i.length&&(e.find(".carousel-cell.is-selected").removeClass("is-selected"),i.addClass("is-selected").trigger($.Event("keydown",{key:"Enter",keyCode:13,preventDefault:function(){}})))}},{key:"handleExpWidgetReopen",value:function(e){window.PSEXP&&PSEXP.isClickReady?e.get(0).click():document.addEventListener("psexp-click-ready",function(t){return e.get(0).click()},!1)}}]),t}(),q="no-scroll",X="curtain",J="curtain__blur",Q=function(e,t){var n="addClass"===e?"on":"off";$("html, body")[e](q),t&&t.length&&t[n]("touchmove.dkUtilsLockScreen",function(e){return e.preventDefault(),e.stopPropagation(),!1})},Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"100",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"dark";return new Promise(function(a,i){var o=$(".".concat(X)),r=[n,"opacity--".concat(t)];o.length||(o=$('<div class="'.concat(X,'" />')),$("#gdk__content").append(o)),o[0].$wrapper||(o[0].$wrapper=$(".cmp-container")),e?(o.removeClass("display--hidden"),setTimeout(function(){o.addClass(r)},10),setTimeout(function(){o[0].$wrapper.addClass(J)},250)):(o[0].$wrapper.removeClass(J),o.removeClass(r),setTimeout(function(){o.attr("class","".concat(X," display--hidden"))},250)),Q(e?"addClass":"removeClass",o),a()})},ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#gdk__content",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise(function(a,i){var o=($(e).html()||"").trim();if(o){if(n){var r=$($.parseHTML(o)).addClass(e.replace(/^#+/,""));$(t).append(r)}else $(t).append($.parseHTML(o));a("success")}else i("failure")})},te=function(e){var t=$(e);t.length&&t.html("")},ne=function(e){if(!e||"false"===e)return null;if(e.startsWith("#"))return e;var t=/^rgba\(/.test(e);e=e.substring(t?5:4).split(")")[0].split(e.indexOf(",")>-1?",":" ");var n=(+e[0]).toString(16),a=(+e[1]).toString(16),i=(+e[2]).toString(16);if(n=1==n.length?"0".concat(n):n,a=1==a.length?"0".concat(a):a,i=1==i.length?"0".concat(i):i,!t)return"#".concat(n).concat(a).concat(i);var o=Math.round(255*+e[3]).toString(16);return o=1==o.length?"0".concat(o):o,"#".concat(n).concat(a).concat(i).concat(o)},ae=function(e){var t=e.length>7;return"".concat(t?e.substring(0,7):e,"00")},ie=function(e,t,n,a,i,o){var r=e.data(t)||"";if(r){var s={};r=ne(r),a&&(s={"--gradient-start-color":r,"--gradient-end-color":ae(r)}),i&&(s["--gradient-start-color-tablet"]=r,s["--gradient-end-color-tablet"]=ae(r)),o&&(s["--gradient-start-color-desktop"]=r,s["--gradient-end-color-desktop"]=ae(r)),n&&(s[n]=r),e.css(s)}},oe=function(e,t){var n=parseInt(t.css("width")),a=parseInt(_gpdc.elements.$body.css("width")),i=parseInt(e.css("padding-inline-end")),o=t.offset().left,r=t.position().left,s={left:i,right:a-i};o<s.left?e.animate({scrollLeft:r},100):o+n>s.right&&e.animate({scrollLeft:r+n-(a-i-i)},100)},re=function(e,t,n){t=Array.isArray(t)?t:[t],$.each(t,function(t,a){var i="custom-".concat(a,"-").concat(n),o=e&&e.length?e:$("[data-".concat(i,"]"));$.each(o,function(e,t){var n=$(t).data(i);n&&n!==!1&&t.style.setProperty("--".concat(i),n)})})},se=function(e){var t=((window._gpdc||{}).browser||{}).device||"";if(t.match(/ps3/i)||t.match(/ps4/i)||t.match(/ps5/i)){var n=e.attr("href")||"";(n.includes(z.oldStoreUrl)||n.includes(z.newStoreUrl))&&e.attr({href:ce(n),target:"_self"})}},ce=function(e){var t={};return e.replace(/([^#\/&=?]+)=([^?&=]+)/gi,function(e,n,a,i){t[n]=decodeURIComponent(a)}),t.cid&&(e=t.cid.match(/STORE-/)?z.consoleUrlPrefix.category:z.consoleUrlPrefix.product+t.cid),e},le=function(){function t(){e(this,t);var n=new Date;this.IGNORE_RATING_CLASS="ignore-rating",this.RATED_VIDEO_NOT_SELECTOR=':not([data-component="video-block"])',this.userState=new Y,this.isMatureRatedPage=_gpdc.elements.$body.data("rated-mature"),this.ageGateType=_gpdc.elements.$body.data("age-gate-type"),this.ageThreshold=parseInt(_gpdc.elements.$body.data("age-threshold")||"17",10),this.cookieTimeout=parseInt(_gpdc.elements.$body.data("cookie-timeout")||"120",10),this.isAutoTriggered=_gpdc.elements.$body.data("auto-trigger-gated-page"),this.isAdvancedAgeGate=_gpdc.elements.$body.data("advanced-age-gate"),this.ratingAgeThreshold=this.isAdvancedAgeGate?parseInt(_gpdc.elements.$body.data("rating-age-threshold")||this.ageThreshold,10):this.ageThreshold,this.ratingAgeLessThanAgeThreshold=this.ratingAgeThreshold<this.ageThreshold,this.loggedInUser=_gpdc.user&&_gpdc.user.isLoggedIn?_gpdc.user:null,this.usersAge=0,this.$ageGate=null,this.$ageGateVideo=null,this.lastElementTabIndex=2,this.$triggerElement=null,this.formValidations={year:{regx:/^\d{4}$/,min:1869,max:n.getFullYear()},month:{regx:/^\d{1,2}$/,min:1,max:12,currentMonth:n.getMonth()+1},day:{regx:/^\d{1,2}$/,min:1,max:31,currentDay:n.getDate()}}}return n(t,[{key:"getAgeGateElement",value:function(){return this.isAdvancedAgeGate&&"video-block"===this.triggerComponent?this.$ageGateVideo:this.$ageGate}},{key:"checkAgeGateStatus",value:function(e){this.loggedInUser&&this.loggedInUser.isMature||this.usersAge>=this.ageThreshold?this.setAgeGateSuccess(e,!1):this.isAdvancedAgeGate&&this.usersAge>=this.ratingAgeThreshold&&this.setAgeGateSuccess(e,!0)}},{key:"setAgeGateSuccess",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)return $('[data-component="video-block"][data-age-gated="true"]').attr("data-age-gated",!1).data("age-gated",!1),void $('[data-component="video-block"][data-force-age-gate="true"]').attr("data-force-age-gate",!1).data("force-age-gate",!1);var n='[data-component="image-block"][data-age-gated]:not([data-lightbox="true"])';this.isAutoTriggered&&_gpdc.elements.$body.attr("data-auto-trigger-gated-page",!1),this.isMatureRatedPage&&(_gpdc.elements.$body.addClass(this.IGNORE_RATING_CLASS),_gpdc.elements.$body.attr("data-rated-mature",!1).data("rated-mature",!1));var a=this.isAdvancedAgeGate&&this.usersAge<this.ratingAgeThreshold?this.RATED_VIDEO_NOT_SELECTOR:"";$('[data-age-gated="true"]'+a).attr("data-age-gated",!1).data("age-gated",!1),$('[data-force-age-gate="true"]'+a).attr("data-force-age-gate",!1).data("force-age-gate",!1),$("".concat(n,'[href="').concat(E,'"]')).attr("tabindex",-1),e||this.userState.clear()}},{key:"updateSignInLink",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".age-gate",n=$("".concat(t,' [data-sign-in-link="true"]'));n.length&&n.on("click.dkSignIn",function(t,n){e.logAgeGateDtmEvent($(n),"select sign in","sign in","link"),_gpdc.analytics._satelliteTrack("user_engagement"),window._gpdc.config.doSignIn()})}},{key:"logAgeGateDtmEvent",value:function(e,t,n,a){_gpdc.analytics.event.addGDLEvent("click",t,{moduleName:"age-gate",elementType:a,assetName:A.EMPTY_LABEL,linkUrl:A.EMPTY_LABEL,label:n,userActionFlag:!1,position:1},e)}},{key:"toggleSubmitBtnState",value:function(e){var t=this.getAgeGateElement().find(".age-gate__input-btn");e?(t.attr("aria-disabled","true"),t.addClass("cta__disabled")):(t.attr("aria-disabled","false"),t.removeClass("cta__disabled"))}},{key:"getUsersAgeInYears",value:function(e,t,n){var a=new Date,i=new Date(e,t,n),o=a.getMonth()-i.getMonth(),r=a.getFullYear()-i.getFullYear();return(o<0||0===o&&a.getDate()<i.getDate())&&r--,r}},{key:"toggleFormValidityState",value:function(){var e=this.getAgeGateElement(),t=e.find("#age-gate-day"),n=e.find("#age-gate-month"),a=e.find("#age-gate-year"),i=$(".age-gate__error-notice"),o=[t.attr("aria-invalid"),n.attr("aria-invalid"),a.attr("aria-invalid")];o.includes("true")?(this.toggleSubmitBtnState(!0),i.removeClass("visibility--hidden")):(this.toggleSubmitBtnState(!1),i.addClass("visibility--hidden")),t.val()&&n.val()&&a.val()||this.toggleSubmitBtnState(!0)}},{key:"validateInputField",value:function(e,t,n){var a,i,o,r,s,c,l=this.formValidations[t],d=this.getAgeGateElement(),u=d.find("#age-gate-month"),g=d.find("#age-gate-year"),h=!0;if(h=""===n||l.regx.test(n)&&n>=l.min&&n<=l.max,"year"!==t&&(a=parseInt(g.val()||"0",10),i=parseInt(u.val()||"0",10),r=a===this.formValidations.year.max,o="true"==g.attr("aria-invalid"),s="true"==u.attr("aria-invalid")),!h)return h;if("month"!==t||o||(h=r?n<=l.currentMonth:h),"day"===t&&!o&&!s){var p=i===this.formValidations.month.currentMonth;c=new Date(a,i,0).getDate(),c=r&&p?l.currentDay:c,h=!n||n<=c}return h}},{key:"ageGateClose",value:function(e,t,n){var a=this,i=this.getAgeGateElement(),o=i.find(".age-gate__input-btn");Z(!1).then(function(r){i.addClass("display--hidden"),"DOB"===a.ageGateType&&($.each(i.find(".age-gate__input-field"),function(e,t){var n=$(t);n.val("").removeClass("dirty").attr("aria-invalid",!1),n.closest("label").removeClass("hasError")}),i.find(".age-gate__error-notice").addClass("visibility--hidden"),o.off("click.psAgeGate")),e.off(t),a.ageGateAccessibilityUtils("off"),null!==n&&n()})}},{key:"defineAgeGateEscape",value:function(e){var t=this,n=this.getAgeGateElement(),a=n.find(".text-link"),i=n.find(".age-gate__close");if(this.isAutoTriggered){a.removeClass("display--hidden"),i.remove();var o=!1;try{var r=new URL(document.referrer);o=r.origin===location.origin}catch(e){o=(document.referrer||"").startsWith(location.origin)}return void(o&&a.on("click.psAgeGateBack",function(e){e.preventDefault(),a.attr("href",document.referrer),window.history.back(-1)}))}a.remove(),i.removeClass("display--hidden"),i.on("click.psAgeGate",function(n){return t.ageGateClose(i,"click.psAgeGate",e)}),_gpdc.elements.$document.on("keyup.psAgeGate",function(n){"Escape"!==n.key&&"Esc"!==n.key&&27!==n.keyCode||(n.stopPropagation(),t.ageGateClose(_gpdc.elements.$document,"keyup.psAgeGate",e))})}},{key:"showAccessDenied",value:function(){var e=this;this.isAutoTriggered&&te(W.CONTENT);var t=this.getCorrectAgeGateElm(".age-gate.user-shall-not-pass"),n=t.ageGateElmVar,a=t.ageGateElmRef;this[n]=a,Z(!0).then(function(t){e[n]&&e[n].length?(e.defineAgeGateEscape(null),e[n].removeClass("display--hidden")):ee(W.TYPE_TEMPLATE_ID_MAP.SHALL_NOT_PASS).then(function(t){var n=e.getCorrectAgeGateElm(".age-gate.user-shall-not-pass",!0),a=n.ageGateElmVar,i=n.ageGateElmRef;e[a]=i,e.applyTabOrder("ACCESS_DENIED"),e.defineAgeGateEscape(null)}).catch(function(){return _gpdc.Logger.warn("Unable to find Age Gate Shall Not Pass HTML Template!!")})}).then(function(t){e.ageGateAccessibilityUtils("on")})}},{key:"attachInputFieldEventHandler",value:function(e,t){var n=this;e.on("keyup.psAgeGate blur.psAgeGate",function(a){var i,o=a.which||a.keyCode,r=e.val(),s=r.length,c=parseInt(e.attr("minlength")),l=parseInt(e.attr("maxlength")),d=e.attr("name"),u=0,g=!1;e.addClass("dirty");var h=n.getAgeGateElement().find("#age-gate-day");(s>=c||"blur"==a.type||!r&&e.hasClass("dirty"))&&(u=parseInt(r.substring(0,l),10),u=isNaN(u)?"":u,e.val(u),g=n.validateInputField(e,d,u),e.attr("aria-invalid",!g),e.closest("label")["".concat(g?"remove":"add","Class")]("hasError"),"day"!=d&&h.hasClass("dirty")&&(i=n.validateInputField(h,"day",h.val()),h.attr("aria-invalid",!i),h.closest("label")["".concat(i?"remove":"add","Class")]("hasError")),g&&r&&s>=l&&o&&U.INPUTS_RESERVED_KEY_CODES.indexOf(o)===-1&&t.focus()),r||e.removeClass("dirty"),n.toggleFormValidityState()})}},{key:"attachSubmitBtnLogic",value:function(){var e=this;return new Promise(function(t,n){var a=e.getAgeGateElement(),i=a.find(".age-gate__input-btn");i.on("click.psAgeGate",function(o){if(o.preventDefault(),o.stopPropagation(),!i.hasClass("cta__disabled")){var r=a.find("#age-gate-day").val(),s=a.find("#age-gate-year").val(),c=a.find("#age-gate-month").val();c=parseInt(c||"1",10)-1,e.usersAge=e.getUsersAgeInYears(s,c,r);var l=e.isAdvancedAgeGate&&"video-block"===e.triggerComponent,d=e.usersAge<e.ageThreshold,u=e.usersAge<e.ratingAgeThreshold,g=!!d&&(l&&!u);L(W.COOKIE_NAME,e.usersAge,e.cookieTimeout);var h=l?u:d;if(h)Z(!0).then(function(t){a.remove(),a=null,e.showAccessDenied(),l&&!d&&e.setAgeGateSuccess(!1,!1),e.logAgeGateDtmEvent(i,"submit age-gate too-young","sumbit","button"),n()});else{if(!e.isAutoTriggered)return void Z(!1).then(function(n){a.addClass("display--hidden"),e.logAgeGateDtmEvent(i,"submit age-gate","submit","button"),_gpdc.analytics._satelliteTrack("age_gate_submit"),a.remove(),t(g)});e.logAgeGateDtmEvent(i,"submit age-gate","submit","button"),_gpdc.analytics._satelliteTrack("age_gate_submit"),window.location.reload()}}})})}},{key:"applyTabOrder",value:function(e){var t=this,n=this.getAgeGateElement(),a=n.find(".age-gate__input-btn");switch(e){case"SIGN_IN":this.lastElementTabIndex=2,n.find('[data-sign-in-link="true"]').attr("tabindex",this.lastElementTabIndex);break;case"ACCESS_DENIED":this.lastElementTabIndex=2,n.find(".text-block a").attr("tabindex",this.lastElementTabIndex);break;case"DOB":var i=(_gpdc.elements.$body.data("date-format")||"YYYY/MM/DD").toLowerCase().split(/\/|\-|\:|\.|\,/);i.forEach(function(e,a){var i=W.FIELDS[e.substring(0,1)],o=a+1;n.find(i).addClass("order--".concat(o)),n.find("".concat(i," input")).attr("tabindex",o+1),t.lastElementTabIndex++}),a.attr("tabindex",this.lastElementTabIndex),this.lastElementTabIndex++,n.find('[data-sign-in-link="true"]').attr("tabindex",this.lastElementTabIndex)}}},{key:"handleCustomFocus",value:function(e,t,n){16===e.keyCode||"Tab"!==e.key&&9!==e.keyCode||(e.preventDefault(),e.stopPropagation(),this.getAgeGateElement().find('[tabindex="'.concat(e.shiftKey?t:n,'"]')).focus())}},{key:"ageGateAccessibilityUtils",value:function(e){var t=this,n=this.getAgeGateElement();"on"===e?n.find('[tabindex="2"]').focus():this.$triggerElement&&this.$triggerElement.focus(),n.find('[tabindex="'.concat(this.lastElementTabIndex,'"]'))[e]("keydown.dkAgeGate",function(e){t.handleCustomFocus(e,t.lastElementTabIndex-1,1)}),n.find('[tabindex="1"]')[e]("keydown.dkAgeGate",function(e){t.handleCustomFocus(e,t.lastElementTabIndex,2)})}},{key:"defineDOBAgeGateFields",value:function(e,t){var n=this,a=this.getAgeGateElement(),i=a.find(".age-gate__input-field");this.applyTabOrder(this.ageGateType),i.each(function(e,t){var i=$(t),o=i.get(0).tabIndex+1,r=a.find('[tabindex="'.concat(o,'"]'));n.attachInputFieldEventHandler(i,r)}),this.attachSubmitBtnLogic().then(function(t){return e(t)}).catch(t)}},{key:"showAgeGate",value:function(){var e=this;return new Promise(function(t,n){var a=e.getCorrectAgeGateElm(".age-gate"),i=a.ageGateElmVar,o=a.ageGateElmRef;e[i]=o,e[i]&&e[i].length?("DOB"===e.ageGateType&&e.defineDOBAgeGateFields(t,n),e.defineAgeGateEscape(n),Z(!0).then(function(t){e[i].removeClass("display--hidden"),e.logAgeGateDtmEvent(e[i],"open age-gate",A.EMPTY_LABEL,"popup"),e.ageGateAccessibilityUtils("on")})):ee(W.TYPE_TEMPLATE_ID_MAP[e.ageGateType]).then(function(a){var i=e.getCorrectAgeGateElm(".age-gate",!0),o=i.ageGateElmVar,r=i.ageGateElmRef;e[o]=r,e.updateSignInLink(),e.defineAgeGateEscape(n),"DOB"===e.ageGateType?Z(!0).then(function(a){e.defineDOBAgeGateFields(t,n)}).then(function(t){e.logAgeGateDtmEvent(e[o],"open age-gate",A.EMPTY_LABEL,"popup"),e.ageGateAccessibilityUtils("on")}):(Z(!0).then(function(t){e.applyTabOrder(e.ageGateType),e.logAgeGateDtmEvent(e[o],"open age-gate",A.EMPTY_LABEL,"popup"),e.ageGateAccessibilityUtils("on")}),n())}).catch(function(e){_gpdc.Logger.warn("Unable to find Age Gate HTML Template!!",e)})})}},{key:"getCorrectAgeGateElm",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.isAdvancedAgeGate&&"video-block"===this.triggerComponent?"rated-video-gate":"generic-gate",a="rated-video-gate"===n?":not(.generic-gate)":":not(.rated-video-gate)",i="rated-video-gate"===n?"$ageGateVideo":"$ageGate",o=$("".concat(e).concat(t?a:".".concat(n)));return t&&(o.addClass(n),o=$("".concat(e,".").concat(n))),{ageGateElmVar:i,ageGateElmRef:o}}},{key:"isGated",value:function(e){if(!e||!e.length)return!1;var t=e.data(),n=t.ageGated,a=void 0!==n&&n,i=t.forceAgeGate,o=void 0!==i&&i;return a===!0||o===!0}},{key:"triggerIfNeeded",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.isGated(e)?(t&&(t.preventDefault(),t.stopPropagation()),this.userState.save(e.data(U.COMPONENT_INSTANCE_ID_ATTR)),this.triggerAgeGate(e)):Promise.resolve()}},{key:"callShowAgeGate",value:function(e,t){var n=this;this.showAgeGate().then(function(t){n.setAgeGateSuccess(!1,t),e()}).catch(t)}},{key:"triggerAgeGate",value:function(e){var t=this;return new Promise(function(n,a){t.$triggerElement=e;var i=function(){e.trigger("success.psAgeGate.attr"),n()};if(t.$triggerElement&&!t.$triggerElement.hasClass("media-block")&&(t.$triggerElement=t.$triggerElement.find(".media-block")),t.usersAge=t.loggedInUser?t.loggedInUser.age:parseInt(I(W.COOKIE_NAME)||"0"),t.triggerComponent=t.$triggerElement?t.$triggerElement.data("component"):null,t.isAdvancedAgeGate&&"video-block"===t.triggerComponent){var o=t.usersAge>=t.ratingAgeThreshold;return void(o||t.loggedInUser&&t.loggedInUser.isPageRatingMature?(L(W.COOKIE_NAME,t.usersAge||t.loggedInUser.age,t.cookieTimeout),t.setAgeGateSuccess(!1,t.ratingAgeLessThanAgeThreshold),i()):t.usersAge||t.loggedInUser?(L(W.COOKIE_NAME,t.usersAge||1,t.cookieTimeout),t.showAccessDenied(),a()):t.callShowAgeGate(i,a))}var r=t.usersAge>=t.ageThreshold;r||t.loggedInUser&&t.loggedInUser.isMature?(L(W.COOKIE_NAME,t.usersAge||t.loggedInUser.age,t.cookieTimeout),t.setAgeGateSuccess(!1,!1),i()):t.usersAge||t.loggedInUser?(L(W.COOKIE_NAME,t.usersAge||1,t.cookieTimeout),
t.showAccessDenied(),a()):(t.isAutoTriggered&&te(W.CONTENT),t.callShowAgeGate(i,a))})}},{key:"init",value:function(){var e=this;this.usersAge=this.loggedInUser?this.loggedInUser.age:parseInt(I(W.COOKIE_NAME)||"0"),this.isMatureRatedPage&&(this.loggedInUser&&!this.loggedInUser.isMature?this.isAutoTriggered=!0:_gpdc.elements.$body.addClass(this.IGNORE_RATING_CLASS));var t=I(W.COOKIE_NAME);!this.isAdvancedAgeGate||"success"!==t&&"failure"!==t||S(W.COOKIE_NAME),this.isAutoTriggered?this.triggerAgeGate(null).catch(function(e){}):this.checkAgeGateStatus(!0);var n=$("[data-trigger-gated-elm]");return!(!n||!n.length)&&(n.each(function(t,n){var a=$(n);a.on("click.psAgeGate",function(){e.triggerAgeGate(a).then(function(e){a.trigger("success.psAgeGate.attr")}).catch(function(e){})})}),void _gpdc.Logger.logInitializer("core","components","Age Gate"))}}]),t}(),de=function(){function t(){e(this,t)}return n(t,[{key:"setUpVideoPlayers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a={controls:!0,controlBar:{pictureInPictureToggle:!1,volumePanel:!0,currentTimeDisplay:!0,durationDisplay:!0,remainingTimeDisplay:!1,timeTooltip:!1},autoplay:!1,preload:"auto",fluid:!0,fill:!0};$.each(t,function(t,n){var i=$(n).closest(".media-block--video"),o=videojs(n,a);o.on("ready",function(){var t=parseInt(i.attr("tabindex")||"0",10)+1;e.setUpCustomButtons(i,t,o)})}),1===t.length&&n&&t.focus()}},{key:"addCustomListeners",value:function(e,t,n,a){e.on("keyup.dkVideoBlock",function(e){var t=e.key,n=e.keyCode;if("Enter"==t||"Space"==t||13==n||32==n){var i=$(document.activeElement);i.is("video")||i.hasClass("media-block--video")||i.hasClass("vjs-volume-bar")?a.paused()?a.play():a.pause():i.hasClass("pause-video")&&setTimeout(function(){return i.prev().focus()},30)}}),e.on("keydown.dkVideoBlock",function(n){16===n.keyCode||"Tab"!==n.key&&9!==n.keyCode||(n.preventDefault(),n.stopPropagation(),!n.shiftKey&&$(n.target).hasClass("media-block--video")?e.find('[tabindex="'.concat(t,'"]:visible')).eq(0).focus():n.shiftKey&&t>2&&e.closest(".media-lightbox").find('[tabindex="'.concat(t-2,'"]')).focus())}),e.find('[tabindex="'.concat(n,'"]')).on("keydown.dkVideoBlock",function(a){if(16!==a.keyCode&&("Tab"===a.key||9===a.keyCode))if(a.preventDefault(),a.stopPropagation(),a.shiftKey)e.find('[tabindex="'.concat(n-1,'"]')).focus();else{var i=e.closest(".media-lightbox").find('[tabindex="'.concat(t+6,'"]'));i.length?i.focus():function(){}}})}},{key:"setUpCustomButtons",value:function(e,t,n){var a,i,o,r,s,c,l=$("#custom-btn-template"),d=l.prop("content"),u=$(d).find("svg"),g=t+5;e.find(".vjs-big-play-button").attr("tabindex",t),e.find(".vjs-mute-control").attr("tabindex",t+2),e.find(".vjs-volume-bar").attr("tabindex",t+3),e.find(".vjs-progress-holder").attr("tabindex",t+4);var h=e.find(".vjs-control-bar .vjs-play-control");$.each(u,function(e,l){var d=n.controlBar.addChild("button"),u=$(l).attr("data-btn-id"),p=d.el(),f=$(p);switch(f.append(document.importNode(l,!0)),u){case"play-video":a=f.attr("tabindex",t),f.addClass("play-video"),f.insertBefore(h);break;case"pause-video":i=f.attr("tabindex",t),f.addClass("pause-video"),f.insertBefore(h);break;case"replay-video":o=f.attr("tabindex",t),f.addClass("replay-video"),f.insertAfter(h);break;case"back-to-start":r=f,f.addClass("back-to-start").attr("tabindex",t+1),f.insertAfter(h);break;case"full-screen":s=f.attr("tabindex",g),f.addClass("full-screen-control");break;case"close-full-screen":c=f.attr("tabindex",g),f.addClass("close-full-screen-control")}}),n.on("play",function(){$(".vjs-big-play-button").hide(),$(".vjs-big-play-button",".vjs-control-bar .play-video").attr("aria-pressed",!0),$(".vjs-control-bar .pause-video").attr("aria-pressed",!1),a.hide(),o.hide(),r.show(),i.show().focus()}),n.on("pause",function(){$(".vjs-big-play-button",".vjs-control-bar .play-video").attr("aria-pressed",!1),$(".vjs-control-bar .pause-video").attr("aria-pressed",!0),i.hide(),a.show().focus()}),n.on("ended",function(){$(".vjs-big-play-button",".vjs-control-bar .play-video").attr("aria-pressed",!1),$(".vjs-control-bar .pause-video").attr("aria-pressed",!1),a.hide(),r.hide(),o.show().focus()}),n.on("fullscreenchange",function(){setTimeout(function(){n.hasClass("vjs-fullscreen")?$(n.el_).find('[tabindex="'.concat(t,'"]')).focus():(c.hide(),s.show().focus())},50)}),a.on("click.dkPlayVideo touchend.dkPlayVideo",function(){$(".vjs-big-play-button",".vjs-control-bar .play-video").attr("aria-pressed",!0),$(".vjs-control-bar .pause-video").attr("aria-pressed",!1),a.hide(),i.show(),n.play()}),i.on("click.dkPauseVideo touchend.dkPauseVideo",function(){$(".vjs-big-play-button",".vjs-control-bar .play-video").attr("aria-pressed",!1),$(".vjs-control-bar .pause-video").attr("aria-pressed",!0),i.hide(),a.show(),n.pause()}),o.on("click.dkReplayVideo touchend.dkReplayVideo",function(){o.hide(),r.show(),i.show(),n.play()}),r.on("click.dkBackToStart touchend.dkBackToStart",function(){n.currentTime(0)}),s.on("click.dkFullScreen touchend.dkFullScreen",function(){s.hide(),c.show(),n.requestFullscreen()}),c.on("click.dkCloseFullScreen touchend.dkCloseFullScreen",function(){c.hide(),s.show(),n.exitFullscreen()}),this.addCustomListeners(e,t,g,n)}}]),t}(),ue=function(){function t(){e(this,t),this.ageGate=new le}return n(t,[{key:"processEmbedVideo",value:function(e,t,n,a,i,o){var r=$.trim(e.attr("data-playlist")||""),s="".concat(V.EMBED_URL).concat(n,"?controls=1&enablejsapi=1");a&&i&&(s+="&clip=".concat(a,"&clipt=").concat(i)),o&&(s+="&start=".concat(o)),r||"true"!==e.attr("data-loop")?r&&(s+="&loop=1&listType=playlist&list=".concat(r)):s+="&loop=1&playlist=".concat(n),"true"===e.attr("data-autoplay")&&(s+="&autoplay=1&rel=0",t.attr("allow","autoplay; encrypted-media"));var c=e.attr("data-yt-captions");c&&(s+="&cc_lang_pref=".concat(c,"&cc_load_policy=1"));var l=window.location.origin;s+="&origin=".concat(l,"&widget_referrer=").concat(l);var d="yt-video-".concat(n);t.attr("src",s),t.attr("id",d);try{var u=new YT.Player(d);t.data("player",u)}catch(e){_gpdc.Logger.warn("YouTube API error",e)}}},{key:"setupEmbeddedVideos",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:'[data-embed-video="true"]',n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=t instanceof jQuery?t:$(t);a&&a.length&&a.each(function(t,a){var i=$(a),o=i.find("iframe"),r=i.data(),s=r.videoId,c=r.clipId,l=r.clipTiming,d=r.videoTimeStamp;n?e.processEmbedVideo(i,o,s,c,l,d):(o.hide(),e.ageGate.triggerIfNeeded(i).then(function(){o.show(),e.processEmbedVideo(i,o,s,c,l,d)}).catch(function(){_gpdc.Logger.log("Age gate failed on YT Embed Video Block.")}))})}},{key:"loadYoutubeApi",value:function(){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}},{key:"init",value:function(){this.loadYoutubeApi(),this.setupEmbeddedVideos('[data-embed-video="true"]',!1),_gpdc.Logger.logInitializer("core","components","Media Block: Youtube Embed Video")}}]),t}(),ge=6,he=1,pe=function(){function t(){e(this,t),this.videoPlayer=new de,this.ytEmbedVideo=new ue,this.carousel=new fe,_gpdc.Logger.logInitializer("core","components","Media Lightbox")}return n(t,[{key:"openMediaLightbox",value:function(e,t,n,a){var i=this,o=$(".media-lightbox__main");return k=t,k.data("dk-media-lightbox")===!0?Promise.reject():(k.data("dk-media-lightbox",!0),new Promise(function(r,s){o.length?i.displayMediaLightbox(a,!1,e).then(function(a){i.chooseLightboxType(e,t,n,o),r(a)},function(e){return s(err)}):ee("#media-lightbox__template").then(function(c){o=$(".media-lightbox__main"),i.displayMediaLightbox(a,!0,e).then(function(a){i.chooseLightboxType(e,t,n,o),r(a)},function(e){return s(err)})}).catch(function(e){s(e),_gpdc.Logger.warn("Unable to find Media LightBox HTML Template!!")})}))}},{key:"chooseLightboxType",value:function(e,t,n,a){var i=$(".media-lightbox"),o=$(".media-lightbox__lower");if(he=1,"carousel"===e)a.addClass("carousel"),this.createLightboxCarousels(n);else{var r=t.data("component");i.addClass("no-carousel"),o.addClass("no-carousel-lower"),"video-block"===r||"live-image"===r?this.cloneMediaBlockIntoLightbox("video",t,a,"main"):"image-block"===r&&(this.cloneMediaBlockIntoLightbox("image",t,a,"main"),this.fullscreenLightboxMedia())}}},{key:"displayMediaLightbox",value:function(e,t,n){var a=this,i=$(".media-lightbox"),o=$(".media-lightbox__main"),r=$(".media-lightbox__lower");return new Promise(function(s,c){Z(!0).then(function(c){i.addClass("show reveal theme--".concat(e," ").concat(e)),o.addClass("reveal"),setTimeout(function(){r.addClass("reveal"),a.lightboxAccessibilityUtils("on",n)},250),t&&(i.find(".media-lightbox__close").on("click.dkMediaLightbox",function(e){return a.closeMediaLightbox(e)}),_gpdc.elements.$document.on("keyup.dkMediaLightboxImage",function(e){"Escape"!==e.key&&"Esc"!==e.key&&27!==e.keyCode||(e.stopPropagation(),a.closeMediaLightbox(e))}),o.on("click",function(e){return e.stopPropagation()}),a.carousel.addAnalyticsEventHandlers(o)),s(c)},function(e){return c(e)})})}},{key:"closeMediaLightbox",value:function(e){var t=$(".media-lightbox"),n=$(".media-lightbox__main"),a=$(".media-lightbox__fullscreen-image"),i=$(".media-lightbox__lower");return n.hasClass("fullscreen")?void this.exitFullScreenMode(e):(i.hasClass("flickity-enabled")&&(this.carousel.destroyCarousel(i),i.empty()),n.hasClass("flickity-enabled")&&(n.removeClass("carousel"),this.carousel.destroyCarousel(n)),t.removeClass("reveal no-carousel"),n.removeClass("reveal"),i.removeClass("reveal no-carousel-lower"),a.removeClass("reveal"),this.lightboxAccessibilityUtils("off"),void Z(!1).then(function(){setTimeout(function(){t.removeClass("show light dark"),i.removeClass("fullscreen"),n.removeClass("fullscreen").empty(),a.removeClass("show").empty()},250)}))}},{key:"createLightboxCarousels",value:function(e){var t=this,n=$(".media-lightbox__main"),a=$(".media-lightbox__lower"),i=e.find(".carousel-cell, .media-carousel__cell"),o=e.data("carousel-cell-index");$.each(i,function(e,i){var r=$(i);r=r.hasClass("media-block")?r:r.find(".media-block");var s=r.data("component");switch(s){case"image-block":t.cloneMediaBlockIntoLightbox("image",r,n,"main",!0,e),t.cloneMediaBlockIntoLightbox("image",r,a,"lower",!0,e);break;case"video-block":case"live-image":t.cloneMediaBlockIntoLightbox("video",r,n,"main",!0,e),t.cloneMediaBlockIntoLightbox("image",r,a,"lower",!0,e);break;default:e<o?o--:e===o&&(o=0)}}),this.carousel.createCarousel(n,{accessibility:!0,cellAlign:"center",contain:!1,prevNextButtons:!0,pageDots:!1,percentPosition:!0,fullscreen:!0,imagesLoaded:!0,initialIndex:o}).catch(function(){}),this.carousel.createCarousel(a,{asNavFor:".media-lightbox__main",cellAlign:"left",contain:!1,prevNextButtons:!0,pageDots:!1,percentPosition:!0,imagesLoaded:!0,accessibility:!1,initialIndex:o}).catch(function(){}),this.fullscreenLightboxMedia(),this.carousel.addAnalyticsEventHandlers(n),a.on("click.dkMediaLightbox",function(e){return e.stopPropagation()}),a.on("hover.dkMediaLightbox",function(){n.hasClass("carousel")&&n.addClass("shade")},function(){n.hasClass("carousel")&&n.removeClass("shade")})}},{key:"cloneMediaBlockIntoLightbox",value:function(e,t,n,a){var i,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=$(".toCloneImage"),s=$(".toCloneVideo"),c=$(".toCloneYoutubeVideo"),l=t.attr("data-caption"),d=t.data(),u=d.videoId,g=d.clipId,h=d.clipTiming,p=d.videoTimeStamp,f=d.ytCaptions,v="video"===e&&!u;if("image"===e){var m,y,k=t.data("component");"video-block"!==k&&"live-image"!==k||"lower"!=a?(m=t.attr("data-src"),y=t.attr("data-src-desktop")||m):(m=t.attr("data-video-thumbnail"),y=t.attr("data-video-desktop-thumbnail")||m);var b=this.getTransparentRenditionVariant(t,!0),_=this.getTransparentRenditionVariant(t,!1),C=K.pictureTag[a||"main"],T=C.replace(/IMG_SRC_MOBILE/g,m).replace(/IMG_SRC_DESKTOP/g,y).replace(/MOBILE_TRANSPARENT/g,b).replace(/DESKTOP_TRANSPARENT/g,_);r.clone().appendTo(n),i=n.find(".toCloneImage"),i.attr({"data-src":m,"data-src-desktop":y}),i.removeClass("cloner toCloneImage"),i.find(".media-block__img").html(T)}else if(v){var w,A=t.data("src"),E=_gpdc.elements.$window.width()>767?t.data("src-desktop"):A;s.clone().appendTo(n),i=n.find(".toCloneVideo"),w=i.find("video"),w.addClass("video-js"),i.removeClass("cloner toCloneVideo"),i.find("source").attr("src",E||A),this.videoPlayer.setUpVideoPlayers(w,!0)}else"video"===e&&u&&(c.clone().appendTo(n),i=n.find(".toCloneYoutubeVideo"),i.attr({"data-video-id":u,"data-clip-id":g,"data-clip-timing":h,"data-video-time-stamp":p,"data-component":"youtube-embed-block","data-yt-captions":f}).removeClass("cloner toCloneYoutubeVideo"),this.ytEmbedVideo.setupEmbeddedVideos('[data-component="youtube-embed-block"]',!1));"main"===a&&l&&i.append('<figcaption class="media-block__caption">'.concat(l,"</figcaption>")),o?(i.addClass("carousel-cell"),"lower"!==a?(he++,i.attr("tabindex",he)):i.attr("tabindex",-1)):"fullscreen"!==a&&(he++,i.attr("tabindex",he)),"lower"!==a&&v&&(he+=ge),u&&(he++,i.find("iframe").attr("tabindex",he))}},{key:"exitFullScreenMode",value:function(e){e.stopPropagation();var t=$(".media-lightbox__main"),n=$(".media-lightbox__lower"),a=$(".media-lightbox__fullscreen-image"),i=$(".media-lightbox").data("close-label");a.removeClass("reveal"),t.removeClass("fullscreen"),n.removeClass("fullscreen"),setTimeout(function(){t.addClass("reveal"),a.removeClass("show").empty(),$(".media-lightbox__close svg").attr("aria-label",i)},450)}},{key:"fullscreenLightboxMedia",value:function(){var e=this,t=$(".media-lightbox__main"),n=$(".media-lightbox__lower"),a=$(".media-lightbox__fullscreen-image"),i=t.find('[data-component="image-block"]'),o=$(".media-lightbox").data("close-fullscreen-label");$.each(i,function(i,r){var s=$(r);s.on("click.dkMediaLightbox keypress.dkMediaLightboxKeyPress",function(i){return i.stopPropagation(),t.hasClass("fullscreen")?void e.exitFullScreenMode(i):void("keypress"===i.type&&13!==i.keyCode||(t.addClass("fullscreen"),n.addClass("fullscreen"),e.cloneMediaBlockIntoLightbox("image",s,a,"fullscreen"),a.addClass("show"),t.removeClass("reveal"),setTimeout(function(){a.addClass("reveal"),$(".media-lightbox__close svg").attr("aria-label",o),$(".media-lightbox__close").focus()},450)))}),a.on("click.dkMediaLightbox",function(t){return e.exitFullScreenMode(t)})})}},{key:"getTransparentRenditionVariant",value:function(e,t){var n='[media="(min-width: '.concat(t?"320px":"768px",')"]');return(e.find("source".concat(n)).attr("srcset")||"").indexOf("--t$")>-1?"--t$":"$"}},{key:"handleCustomFocus",value:function(e,t,n){var a=$(".media-lightbox");16===e.keyCode||"Tab"!==e.key&&9!==e.keyCode||(e.preventDefault(),e.stopPropagation(),a.find('[tabindex="'.concat(e.shiftKey?t:n,'"]')).focus())}},{key:"lightboxAccessibilityUtils",value:function(e,t){var n=this,a=$(".media-lightbox");"on"===e?"carousel"===t?a.find(".is-selected")[0].focus():a.find('[tabindex="2"]').focus():k&&(k.data("dk-media-lightbox",!1),setTimeout(function(){return k.focus()},300)),a.find('[tabindex="'.concat(he,'"]'))[e]("keydown.dkMediaLightbox",function(e){n.handleCustomFocus(e,he-1,1)}),a.find('[tabindex="1"]')[e]("keydown.dkMediaLightbox",function(e){n.handleCustomFocus(e,he,2)})}}]),t}(),fe=function(){function t(){e(this,t),this.userState=new Y,this.arrowShape="M32.483 43.12l-16.66-16.185a2.007 2.007 0 0 1 0-2.879l16.66-16.18a2.007 2.007 0 0 1 2.823.026l.617.622a2.007 2.007 0 0 1-.027 2.853l-13.058 12.68a2.007 2.007 0 0 0 0 2.878L35.896 39.62a2.007 2.007 0 0 1 .027 2.852l-.617.622a2.007 2.007 0 0 1-2.823.027z",this.carouselCellClass=".carousel-cell, .media-carousel__cell",this.isAdvancedAgeGate=_gpdc.elements.$body.data("advanced-age-gate")}return n(t,[{key:"init",value:function(){this.textDirection=_gpdc.config.textDirection,this.createCarousel().catch(function(){}),this.addCarouselClickHandlers(),_gpdc.Logger.logInitializer("core","components","Carousel")}},{key:"addCarouselClickHandlers",value:function(){var e=this,t=$('[data-carousel="true"]');$.each(t,function(t,n){var a=$(n);a.find(".next"),a.find(".previous"),a.data("flickity");$.each(a.find(e.carouselCellClass),function(e,t){return $(t).data("cell-idx",e)}),a.on("keyup.dkCarouselFocus",function(e){var t=e.key,n=e.keyCode;"Tab"!==t&&9!==n||a.addClass("focus-in")}),a.on("blur.dkCarouselBlur",function(){a.removeClass("focus-in")}),a.on("keydown.dkCarousel",function(t,n,i,o){var r=t.target,s=t.type,c=t.key,l=t.keyCode;if("keydown"==s&&("Enter"===c||13===l)){var d=$(r),u=d.filter(".carousel-cell.is-selected, .media-carousel__cell.is-selected").length?d:d.find(".carousel-cell.is-selected, .media-carousel__cell.is-selected");e.performLightboxChecks(u,u.find("picture"),a,u.data("cell-idx"))}}),a.on("staticClick.flickity",function(t,n,i,o){var r=t.target,s=t.type;"staticClick"==s&&e.performLightboxChecks($(i),$(r),a,o)}),e.addAnalyticsEventHandlers(a)})}},{key:"performLightboxChecks",value:function(e,t,n,a){var i=this;if(e&&e.length&&t&&t.length){var o=$(e).hasClass("media-block")?$(e):$(e).find(".media-block"),r=n.data("disable-lightbox");if(!this.shouldContinueClickHandling(t,o,r)||!t.closest(".media-block__inner").length)return void _gpdc.Logger.log("Carousel Cell click - action returned due to either lightbox disabled or click being on Pause/Play toggle or on cell description text, buttons, etc");var s=n.data("lightbox-theme")||"dark",c=new le,l=this.isAdvancedAgeGate?c.isGated(o):n.data("carousel-age-gated");l?(this.userState.save(n.data(U.COMPONENT_INSTANCE_ID_ATTR),U.COMPONENT_INSTANCE_ID_ATTR,a),c.triggerAgeGate(o).then(function(t){i.userState.clear(),i.triggerLightBox(e,n,s,a,o,r),i.logCarouselDtmEvent(n,"click",e)}).catch(function(e){_gpdc.Logger.log("Age gate failed on Carousel!",e)})):(this.triggerLightBox(e,n,s,a,o,r),this.logCarouselDtmEvent(n,"click",e))}}},{key:"shouldContinueClickHandling",value:function(e,t,n){var a=e.hasClass("icon")||e.closest(".media-block__overlay").length;if(t.data("pause-play-toggle")&&a)return!1;var i=t.data("component");return!(!n||"video-block"!==i)||(!(!n||"video-block"===i||!t.data("age-gated"))||!n)}},{key:"triggerLightBox",value:function(e,t,n,a,i,o){var r="video-block"===i.data("component");if(!o||r){var s=new pe;return t.data("carousel-cell-index",a),this.isAdvancedAgeGate||o&&r?void s.openMediaLightbox("singleMedia",i,null,n).catch(function(){}):void s.openMediaLightbox("carousel",e,t,n).catch(function(){})}}},{key:"addAttributes",value:function(e){var t=!1;$.each(e.find(this.carouselCellClass),function(e,n){var a=$(n),i=a.hasClass("media-block")?a:a.find(".media-block");(i.data("age-gated")||i.data("force-age-gate"))&&(t=!0),i.attr("data-slide",e),a.attr("data-slide",e)}),e.data("carousel-age-gated",t)}},{key:"createCarousel",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:'[data-carousel="true"]',n=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".media-carousel",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".media-carousel__pagination";return new Promise(function(o,r){var s=$(t);s.length?($.each(s,function(t,o){var r=$(o),s=r.closest(".game-hero__gallery").length,c=r.data("initial-index"),l=r.data("adaptive-height"),d={rightToLeft:"rtl"===e.textDirection,cellAlign:"center",accessibility:!0,adaptiveHeight:"undefined"==typeof l||l,wrapAround:!s||r.find(e.carouselCellClass).length>2,groupCells:!1,prevNextButtons:!0,pageDots:!0,percentPosition:!0,arrowShape:e.arrowShape,watchCSS:!0,contain:!0,selectedAttraction:.04,friction:.4},u=Object.assign(d,n);if(!r.hasClass("gallery")){c>=0&&(u.initialIndex=c),(r.hasClass("slider__controls--swatches")||r.hasClass("slider__controls--thumbnails"))&&(u.wrapAround=!1,u.contain=!0),e.addAttributes(r),r.data("initial-index")>0&&(u.initialIndex=r.data("initial-index"));var g="".concat(a).concat(s?", .game-hero__gallery":""),h="".concat(i).concat(s?", .game-hero__gallery_pagination":""),p=r.closest(g).find(h);if(p.length){u.pageDots=!1;var f=function(e,t){p[0].pagination("select",t+1)};p.on("change.dkPagination",function(e,t){r.off("change.flickity",f),r.flickity("select",t-1),r.on("change.flickity",f)})}r.on("ready.flickity",function(){r.addClass("flickity-ready");var e=r.closest(".media-carousel__content").find(".media-carousel__pager");e.length&&e.prepend('\n                                <div class="'.concat(r.attr("class"),'">\n                                    <div class="media-carousel__cell"><!-- --></div>\n                                </div>\n                            '))}),r.flickity(u);var v=r.data("flickity");r.find(".media-carousel__cell .media-carousel__description").length&&r.find(".flickity-button").css("top",r.find(".is-selected .media-block").height()/2),r.on("change.flickity",function(e,t){var n=$(".media-block--video .video-js"),a=$(".embed-video iframe");u.fullscreen&&($.each(n,function(e,t){videojs($(t).attr("id")).pause()}),$.each(a,function(e,t){$(t)[0].contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")})),p.length&&p[0].pagination("select",t+1)});var m=r.data("carousel-mobile"),y=r.data("carousel-desktop");(m||void 0==m)&&C.IS_MOBILE&&r.find(e.carouselCellClass).attr("tabindex",-1),(y||void 0==y)&&C.IS_TABLET&&r.find(e.carouselCellClass).attr("tabindex",-1),s&&v.cells.length<4&&(r.find(".flickity-button").hide(),r.find(".flickity-page-dots").hide(),!C.IS_MOBILE&&v.unbindDrag()),r.find(".flickity-button.previous").attr("tabindex",-1),r.find(".flickity-button.next").attr("tabindex",-1)}}),o("success")):r("error")})}},{key:"destroyCarousel",value:function(e){return new Promise(function(t){e.hasClass("flickity-ready")&&e.flickity("destroy").removeClass("flickity-ready"),t()})}},{key:"getMediaType",value:function(e){var t=(e.hasClass("media-block")?e:e.find(".media-block")).data()||{},n=t.component;return"video-block"==n||"live-image"==n?"video":"image"}},{key:"addAnalyticsEventHandlers",value:function(e){var t=this;e.find(".next").on("click.carouselNext",function(){t.logCarouselDtmEvent(e,"next"),t.logCarouselDtmEvent(e,"click")}),e.find(".previous, .prev").on("click.carouselPrev",function(){t.logCarouselDtmEvent(e,"prev"),t.logCarouselDtmEvent(e,"click")})}},{key:"logCarouselDtmEvent",value:function(e,t,n){var a=n&&n.length?n:e.find(".is-selected"),i=this.getMediaType(a),o="",s="",c="";if("next"==t||"prev"==t)o="select carousel ".concat(t),r("elementType");else if("click"==t){var l=a.hasClass("media-block")?a:a.find(".media-block");o="select ".concat(i),s=l.data("src-desktop")||l.data("src"),c=e.find(this.carouselCellClass).index(a)}_gpdc.analytics.event.addGDLEvent("click",o,{moduleName:"carousel",elementType:i,assetName:s||A.EMPTY_LABEL,linkUrl:A.EMPTY_LABEL,label:"click"!==t?t:A.EMPTY_LABEL,userActionFlag:!0,position:c+1||"1"},e),_gpdc.analytics._satelliteTrack("user_engagement")}}]),t}(),ve=9,me=["a[href]:not([disabled])",'div[role="button"]',"button:not([disabled])","textarea:not([disabled])",'input[type="text"]:not([disabled])','input[type="radio"]:not([disabled])','input[type="checkbox"]:not([disabled])',"select:not([disabled])",'[data-component="video-block"]'],ye=[".age-gate:not(.display--hidden)",".media-lightbox.show"],ke=function(){function t(n,a){e(this,t),this.$last=$(document.activeElement),this.$doc=a?a:_gpdc.elements.$document,this.$target=n,this.$focusable=n.find(me.join(", ")),this.focusLimit=this.$focusable.length-1,this.focusIndex=null,this.onKeyDown=this.onKeyDown.bind(this),this.$doc.on("keydown.dkFocusTrap",this.onKeyDown)}return n(t,[{key:"destroy",value:function(){this.$doc.off("keydown.dkFocusTrap",this.onKeyDown),this.$last.focus()}},{key:"autoFocusFirstItem",value:function(){this.focusLimit&&(this.focusIndex=0,this.$focusable.eq(this.focusIndex).focus())}},{key:"onKeyDown",value:function(e){var t="Tab"===e.key||e.keyCode===ve;!this.isExcluded()&&t&&(e.preventDefault(),e.shiftKey?this.focusIndex=null!==this.focusIndex?this.focusIndex-1:this.focusLimit:this.focusIndex=null!==this.focusIndex?this.focusIndex+1:0,this.focusIndex<0?this.focusIndex=this.focusLimit:this.focusIndex>this.focusLimit&&(this.focusIndex=0),this.$focusable.eq(this.focusIndex).focus())}},{key:"isExcluded",value:function(){return $(ye.join(", ")).length}}]),t}(),be={mobile:T.IS_MOBILE,tablet:T.IS_JUST_TABLET,laptop:T.IS_JUST_LAPTOP,desktop:T.IS_DESKTOP},_e={cellAlign:"grid",accessibility:!1,imagesLoaded:!0,adaptiveHeight:!1,groupCells:!1,prevNextButtons:!1,pageDots:!1,percentPosition:!0,watchCSS:!0,selectedAttraction:.01,friction:.15},Ce=function(){function t(){e(this,t),_gpdc.Logger.logInitializer("core","components","Simple Carousel"),this.initializeSimpleCarousel=this.initializeSimpleCarousel.bind(this)}return n(t,[{key:"initializeSimpleCarousel",value:function(e,t){var n=$(t),a=n.find(".carousel"),i=n.find(".pagination"),o=n.find(".carousel-navigation"),r=n.data("flickity-options")||{};this.handleRTLchange(r,_gpdc.config.textDirection,n);var s=$.extend(Object.assign({},_e),r),c=i.data("pages");s.wrapAround=void 0!==r.wrapAround?r.wrapAround:!i.length||c>2,s.forceCenter=Object.keys(be).map(function(e){return n.hasClass("carousel-center@".concat(e))?be[e]:null}).filter(function(e){return e}),a.find(".simple-carousel-cell").each(function(e,t){$(t).clone(!0,!0).addClass("simple-carousel-clone").appendTo(a)});var l=n.closest('[data-component!=""]').attr("data-component");a.find('a[href!=""]').each(function(e,t){_gpdc.analytics.commerce.updateInternalLinkHref({},t,l,"",!0)});var d=a.find(".simple-carousel-cell");s.getGridMarginSize=function(){return(window.innerWidth-i.width())/2};var u=function(e,t){t>=c&&(t-=c),i&&i[0].pagination("select",t+1)},g=function(){var e=0,t=n.width();d.each(function(n,a){var i=$(a);i[0].$focusables||(i[0].$focusables=i.find(me.join(", "))),0===e&&(e=i.width());var o=i.offset(),r=o.left,s=r>=0&&Math.floor(r+e)<=t,c={tabindex:s?0:-1,"aria-hidden":!s};i.attr(c),i[0].$focusables.attr(c)})};a.on("scroll.flickity",g),a.on("change.flickity",u),a.on("dragStart.flickity",function(){return d.css("pointer-events","none")}),a.on("dragEnd.flickity",function(){return d.css("pointer-events","all")}),a.flickity(s),o&&o.find(".btn--quick-action").on("click.dkCarouselNavigation",function(e){var t=e.currentTarget,n=$(t).hasClass("carousel-nav-next")?"next":"previous";a.flickity(n);var i="next"===n?"next":"prev";_gpdc.analytics.event.addGDLEvent("click","select carousel ".concat(i),{moduleName:"carousel",label:i,assetName:A.EMPTY_LABEL,elementType:"button",userActionFlag:!0}),_gpdc.analytics._satelliteTrack("user_engagement")}),i.length&&i.on("change.dkPagination",function(e,t){a.off("change.flickity",u),a.flickity("select",t-1),a.on("change.flickity",u)})}},{key:"handleRTLchange",value:function(e,t,n){e.cellAlign&&"rtl"===t&&("left"===e.cellAlign||"grid"===e.cellAlign?(n.addClass("simple-carousel--right"),e.cellAlign="right"):"right"===e.cellAlign&&(e.cellAlign="left",n.addClass("simple-carousel--left")))}},{key:"init",value:function(){$('[data-carousel-simple="true"]').each(this.initializeSimpleCarousel)}}]),t}(),Te=function(e,t,n,a){var i={assetName:e.data("video-id")||e.data("src-desktop")||e.data("src")||A.EMPTY_LABEL,position:"1",label:A.EMPTY_LABEL,moduleName:n,elementType:t,userActionFlag:!1};a&&(i.linkUrl=a),_gpdc.analytics.event.addGDLEvent("click","select ".concat(t),i,e),_gpdc.analytics._satelliteTrack("asset_click")},we=function(){function t(n){e(this,t),this.$context=n,this.ageGate=null,this.mediaLightBox=null}return n(t,[{key:"init",value:function(){if(!_gpdc.elements.$body.hasClass("no-autoplay")){var e=M('[data-component="live-image"], [data-component="bg-video"]',this.$context);e.length&&(this.ageGate=new le,this.mediaLightBox=new pe,$.each(e,this.processInlineVideo.bind(this)),_gpdc.Logger.logInitializer("core","components","Media Block: Inline Video"))}}},{key:"processInlineVideo",value:function(e,t){var n=this,a=$(t),i=a.data("auto-pause-play"),o=a.data("pause-play-toggle"),r=a.data("playback-limit"),s=a.data("post-playback"),c=C.IS_TABLET?"video.media-block__video\\@tablet":"",l=a.find(c),d=a.find(".media-block__img");l=l.length?l:a.find("video"),l.length&&d.length&&(r&&!o&&this.addVideoPlayEndHandler(a,l,r,s),"image"!==s&&this.addVideoClickHandler(a,o,s),l.hasClass("lozad")&&!l.hasClass("lazy-loaded")?l.watch({properties:"attr_class",callback:function(e){return n.checkIfVideoPlaying(e,a,l,i)}}):this.checkIfVideoPlaying(null,a,l,i))}},{key:"addVideoPlayEndHandler",value:function(e,t,n,a){var i={image:"+inline-video--removed",replay:"+replay-inline-video"},o=0;t.on("ended.dkInlineVideo",function(t){var r=t.currentTarget;o++,o===n?(e.addClass(i[a]).data("video-ended",!0),_gpdc.Logger.log("Video playback reached set count limit: ".concat(o)),o=0):r.play()})}},{key:"addVideoClickHandler",value:function(e,t,n){var a=this,i=t||"replay"===n?e.find(".media-block__overlay > .icon"):e;i.on("click.dkInlineVideo",function(o){o.preventDefault();var r=e.find("video:visible").get(0);if(t){var s=e.hasClass("+inline-video--paused");return s?r.play():r.pause(),e[s?"removeClass":"addClass"]("+inline-video--paused").data("user-paused",!s),e.find(".media-block__icon--play").attr("aria-pressed",s),void e.find(".media-block__icon--pause").attr("aria-pressed",!s)}if(i.closest('[data-carousel="true"]').length)return void _gpdc.Logger.log("Returned from inline video click, since it is in carousel");var c=e.data("video-ended");if(c)return"replay"===n?(e.removeClass("+replay-inline-video").data("video-ended",!1),r.currentTime=0,e.attr("aria-pressed",!1),void r.play()):void("dam"!==n&&"youtube"!==n||a.ageGate.triggerIfNeeded(e,o).then(function(){a.mediaLightBox.openMediaLightbox("singleMedia",e,null,e.data("lightbox-theme")||"dark").catch(function(){}),Te(e,"video","liveimageblock")}).catch(function(){return _gpdc.Logger.log("Age gate failed on Live Image Block.")}))})}},{key:"checkIfVideoPlaying",value:function(e,t,n,a){var i=this;try{n.on("error.dkInlineVideo",function(){i.applyFallback(t)}),n.on("loadeddata.dkInlineVideo",function(){var e=n.get(0);e.readyState>=1&&setTimeout(function(){return e.buffered&&e.buffered.length?(e.buffered.end(0)>0||!e.paused||t.hasClass("+inline-video--paused")?i.setupVideoInView(t,n,a):i.applyFallback(t),void n.off("loadeddata.dkInlineVideo")):void i.applyFallback(t)},U.INLINE_VIDEO_WAIT)})}catch(e){this.applyFallback(t),n.off("loadeddata.dkInlineVideo"),_gpdc.Logger.log("Inline Video exception while checking if video is playing:",e)}e&&setTimeout(function(){return n.unwatch(e.id)},10)}},{key:"applyFallback",value:function(e){e.removeClass("+inline-video").addClass("+inline-video--removed"),e.parent().hasClass("media-carousel__cell")||e.removeClass("+interactive"),e.find("video").remove(),e.find(".media-block__overlay").remove()}},{key:"setupVideoInView",value:function(e,t,n){if(!_gpdc.elements.$body.hasClass("no-autoplay")&&n&&window.Waypoint){new Waypoint.Inview({element:t,enter:function(){e.data("video-ended")||e.data("user-paused")||_gpdc.elements.$body.hasClass("no-autoplay")||(t.get(0).play(),e.removeClass("+inline-video--paused"))},exited:function(){e.data("video-ended")||e.data("user-paused")||(t.get(0).pause(),e.addClass("+inline-video--paused"))}})}}}]),t}(),Ae=function(){function t(n){e(this,t),this.$context=n,this.ageGate=null,this.mediaLightBox=null,this.ytLinkClass="media-block__youtube-link"}return n(t,[{key:"init",value:function(){var e='[data-component="video-block"][data-lightbox="true"]',t=M("".concat(e,":not(.carousel ").concat(e,")"),this.$context),n=M(".simple-carousel ".concat(e),this.$context),a=t.add(n);return!!a.length&&(this.ageGate=new le,this.mediaLightBox=new pe,$.each(a,this.process.bind(this)),void _gpdc.Logger.logInitializer("core","components","Media Block: Video"))}},{key:"process",value:function(e,t){var n=this,a=$(t);a.on("click.dkVideoBlock keydown.dkVideoBlockKeyDown",function(e){
var t=e.key,i=e.type,o=e.target,r=$(o),s=r.hasClass(n.ytLinkClass)||r.closest(".".concat(n.ytLinkClass)).length;"keydown"===i&&"Enter"!==t||s||n.ageGate.triggerIfNeeded(a,e).then(function(){n.mediaLightBox.openMediaLightbox("singleMedia",a,null,a.data("lightbox-theme")||"dark").catch(function(){}),Te(a,"video","videoblock")}).catch(function(){return _gpdc.Logger.log("Age gate failed on Video Block.")})})}}]),t}(),Ee=function(){function t(n){e(this,t),this.$context=n,this.ageGate=null,this.mediaLightBox=null}return n(t,[{key:"init",value:function(){var e=M('[data-component="image-block"][data-lightbox]:not([data-carousel="true"] [data-component="image-block"][data-lightbox]), [data-component="cards"] [data-component="image-block"][data-lightbox]',this.$context);return!!e.length&&(this.ageGate=new le,this.mediaLightBox=new pe,$.each(e,this.process.bind(this)),void _gpdc.Logger.logInitializer("core","components","Media Block: Image"))}},{key:"process",value:function(e,t){var n=this,a=$(t),i=a.data("lightbox"),o=a.closest("a.simple-carousel-cell").attr("href"),r=a.attr("href"),s=r||o||E,c=B(s);i||a.data("age-gated")||r?a.attr("tabindex",0):a.removeAttr("tabindex"),a.on("click.dkImageBlock keydown.dkImageBlockKeyUp",function(e){var t=e.type,o=e.key;"keydown"===t&&"Enter"!==o||n.ageGate.triggerIfNeeded(a,e).then(function(){return i&&n.mediaLightBox.openMediaLightbox("singleMedia",a,null,a.data("lightbox-theme")||"dark").catch(function(){}),i||c?void Te(a,"image","imageblock",c?s:null):void a.attr("tabindex",-1)}).catch(function(){return _gpdc.Logger.log("Age gate failed on Image Block.")})})}}]),t}(),Le=function(){function t(n){e(this,t),this.$context=n}return n(t,[{key:"init",value:function(){var e=M(".media-block.media-block--bg",this.$context);e.length&&($.each(e,this.process.bind(this)),this.process(e),_gpdc.Logger.logInitializer("core","components","Media Block: Background"))}},{key:"process",value:function(e,t){var n=$(t);ie(n,"gradient-theme",null,!0),ie(n,"gradient-theme-tablet",null,!1,!0,!0)}}]),t}(),Ie=function(){function t(){e(this,t)}return n(t,[{key:"init",value:function(){var e=new Le,t=new Ee,n=new Ae,a=new we,i=new ue;e.init(),t.init(),n.init(),a.init(),i.init()}}]),t}(),$e='.text-block a, .title-block a, .stat-block a, [class^="txt-block-"] a:not(.btn--cta):not(.text-link)',Se=function(){function t(){e(this,t)}return n(t,[{key:"formatLinkLabel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?e.trim().replace(/\s+/g,"-").toLowerCase():A.EMPTY_LABEL}},{key:"addClickHandlerForTextBlocks",value:function(){var e=this,t=$($e);$.each(t,function(t,n){var a=$(n),i=a.closest(".txt-block-title").length?"titleblock":"textblock";a.attr("dtm-position",t+1),a.attr("module-name",i),a.on("click.DKTextBlocks",function(t){t.preventDefault(),e.logTextBlockDtmEvent(a).then(function(){_gpdc.analytics._satelliteTrack("select ".concat(i," link"));var e=a.attr("href");"_blank"===a.attr("target")?window.open(e):window.location.href=e})})})}},{key:"logTextBlockDtmEvent",value:function(e){var t=this;return new Promise(function(n){var a=e.children("span:visible"),i=e.attr("module-name");_gpdc.analytics.event.addGDLEvent("click","select ".concat(i," link"),{moduleName:i,elementType:"link",assetName:A.EMPTY_LABEL,linkUrl:e.attr("href")||A.EMPTY_LABEL,label:t.formatLinkLabel(a.text()||e.text()),userActionFlag:!0,position:e.attr("dtm-position")},e),n()})}},{key:"init",value:function(){this.addClickHandlerForTextBlocks(),_gpdc.Logger.logInitializer("core","components","Text Block: Tracker")}}]),t}(),xe=function(){function t(){e(this,t)}return n(t,[{key:"changeOlStartingPos",value:function(){var e=$(".text-block[data-ol-order-start]");$.each(e,function(e,t){var n=$(t).find("ol").eq(0),a=($(t).data("ol-order-start")||1)-1;n.css("counter-reset","item ".concat(a<-1?0:a))})}},{key:"wrapTables",value:function(){var e=$(".text-block table, .textblock table");$.each(e,function(e,t){var n=$(t);n.find("p").each(function(e,t){var n=$(t);0===n.html().replace(/\s$|&nbsp;$/g,"").length&&n.remove()}),n.wrap('<div class="text-block__table"></div>')})}},{key:"init",value:function(){this.changeOlStartingPos(),this.wrapTables();var e=new Se;e.init(),_gpdc.Logger.logInitializer("core","components","Text Block")}}]),t}(),Pe=function(){function t(){e(this,t)}return n(t,[{key:"formatLinkLabel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?String(e).trim().replace(/\s+/g,"-").toLowerCase():A.EMPTY_LABEL}},{key:"trackClick",value:function(e,t,n){if(e.data(U.DTM_IGNORE_EVENT))return void e.data(U.DTM_IGNORE_EVENT,!1);var a=e.data("sku")||null,i=t?e.data("media-block-src")||e.data("video-id"):e.data("analytics-asset"),o=D(e),r="hp-hero"===o,s={elementType:"button",assetName:i||A.EMPTY_LABEL,linkUrl:e.attr("href")||A.EMPTY_LABEL,label:e.data("dtm-label"),userActionFlag:!0,position:e.data("dtm-position")||e.data("btn-position")};s.moduleName=r?"homepage hero banner":o,a&&(s.sku=a);var c=n?"Purchase Intent":"select".concat(a?" purchase":t?" video":""," button"),l=r?"select homepage hero banner button":c,d=r?"banner_click":"user_engagement";H(s.linkUrl)&&(d="store_click",s.userActionFlag=!1,l="select store button"),_gpdc.analytics.event.addRawEvent(e,{eventName:l,eventAction:"click"},s),_gpdc.analytics._satelliteTrack(d)}},{key:"getButtonLabelText",value:function(e){var t=e.data("dtm-label-override");return t&&C.IS_TABLET?this.formatLinkLabel(t):this.formatLinkLabel(e.data("dtm-label"))}},{key:"addClickHandlerForButtonBlocks",value:function(){var e=this,t=$(z.btnLinkSelector);$.each(t,function(t,n){var a=$(n),i=e.getButtonLabelText(a);if(a.data({"btn-position":t+1,"dtm-label":i}),!(a.is(z.btnVideoSelector)||a.is(z.btnAgeGateSelector)||a.is(z.btnPSNLogin)||a.is(z.btnLoyalty))){_gpdc.analytics.commerce.updateInternalLinkHref({},n,"buttonblock",i,!0);var o=a.attr("href")||"",r=o.indexOf(z.newStoreUrl)>-1||o.indexOf(z.pdcDirectUrl)>-1;a.on("click.DKButtonBlocks",function(t){return r&&"_blank"!==a.attr("target")?void e.trackClick(a,!1,r):void e.trackClick(a,!1,r)}),se(a)}})}},{key:"addClickHandlerForWishlistBatarangBtn",value:function(){var e=$('button[data-qa="wishlistToggle"][data-track-click*=":addToWishlist"]');e.length&&$.each(e,function(e,t){var n=$(t);n.data({"btn-position":e+1,"dtm-label":"Add To Wishlist"}),n.on("click.pdcWishlist",function(){var e=n.data("telemetry-meta")||{},t=e.itemId;if(t){var a=digitalData.product.find(function(e){return e.productInfo.productID===t}),i=a?a.productInfo:null;if(i){var o={quantity:1,productName:i.productName,currencyCode:i.currency,sku:t};_gpdc.analytics.event.logCartAdd(n,o,"addtowishlist")}}})})}},{key:"init",value:function(){var e=this;this.addClickHandlerForButtonBlocks(),setTimeout(function(){return e.addClickHandlerForWishlistBatarangBtn()},700),_gpdc.Logger.logInitializer("core","components","Button Block: Tracker")}}]),t}(),Me=function(){function t(){e(this,t),this.WebCheckoutConstants=j,this.clientIdAttr=b.PREVIEW.test(location.href||"")?"data-preview-cid":b.WWWGLOBAL.test(location.href||"")?"data-wwwglobal-cid":"data-cid",this.$webCheckout=null,this.$webCheckoutWrapper=null,this.webCheckoutClientId=null,this.arkhamSessionAPIUrl="",this.displayClass=C.IS_MOBILE_PORTRAIT?"fadeInUpBig":"slideInRight",this.hideClass="".concat(C.IS_MOBILE_PORTRAIT?"fadeOutUpBig":"slideOutRight"," display--hidden")}return n(t,[{key:"appendQuery",value:function(e,t,n){return"".concat(e).concat(e.indexOf("?")>-1?"&":"?").concat(t,"=").concat(n)}},{key:"toggleWebCheckout",value:function(e){var t=this,n=80;e?Z(e,n).then(function(){t.$webCheckoutWrapper.removeClass(t.hideClass).addClass(t.displayClass),t.toggleCurtainClickHandler("on")}):Z(e,n).then(function(){t.$webCheckoutWrapper.removeClass(t.displayClass).addClass(t.hideClass),t.toggleCurtainClickHandler("off")})}},{key:"toggleCurtainClickHandler",value:function(e){var t=this;$("#gdk__content .curtain")[e]("click.dkWebCheckout",function(){t.toggleWebCheckout(t.$webCheckoutWrapper.hasClass("display--hidden"))})}},{key:"attachWebCheckoutiFrame",value:function(e,t){var n=this;return new Promise(function(a,i){var o=window._gpdc.config||{},r=o.productFormattedLocale,s="".concat(n.WebCheckoutConstants.endpoint,"/buynow/").concat(e);if(n.$webCheckoutWrapper=$("#gdk__content .webcheckout__wrapper"),!window._gpdc)return void i("window._gpdc is not defined");var c=_gpdc.analytics.commerce.appendCIDs(s)||"",l=c.match(/emcid=([^&]+)/i)||"",d=c.match(/smcid=([^&]+)/i)||"";l&&(s=n.appendQuery(s,"emcid",l[1])),d&&(s=n.appendQuery(s,"smcid",d[1])),s=n.appendQuery(s,"privacy-policy","exempt"),s=n.appendQuery(s,"language",r||"en-US"),_gpdc.user.isLoggedIn&&(s=n.appendQuery(s,"age",_gpdc.user.age||"18")),s=n.appendQuery(s,"clientId",n.webCheckoutClientId),n.$webCheckout=n.$webCheckoutWrapper.find("iframe"),n.$webCheckout.attr("src")!==s&&(n.$webCheckoutWrapper.addClass(n.WebCheckoutConstants.loadingClass),n.$webCheckout.attr({src:"".concat(s),"data-sku-id":e,"data-uuid":t})),a()})}},{key:"doPasswordVerification",value:function(){this.arkhamSessionAPIUrl||(this.arkhamSessionAPIUrl=this.WebCheckoutConstants.arkhamAPIHost+this.WebCheckoutConstants.arkhamAPIPath.replace("CURRENT_PAGE_URL",encodeURIComponent(window.location.href))),window.location.href=this.arkhamSessionAPIUrl}},{key:"onWindowMessage",value:function(e){var t=e.originalEvent,n=(x(t.data)||{}).action;return n?void(n===this.WebCheckoutConstants.loginAction?(_gpdc.Logger.log("Web Checkout - action to Login: ",n),this.userState.save(this.$webCheckout.data(U.COMPONENT_INSTANCE_ID_ATTR)),window._gpdc.config.doSignIn()):n===this.WebCheckoutConstants.pswrdVerifAction?(_gpdc.Logger.log("Web Checkout - action to Password Verification: ",n),this.userState.save(this.$webCheckout.data(U.COMPONENT_INSTANCE_ID_ATTR)),this.doPasswordVerification()):this.WebCheckoutConstants.closeActions.includes(n)?(this.toggleWebCheckout(!1),_gpdc.Logger.log("Web Checkout - action to close iFrame: ",n)):n===this.WebCheckoutConstants.loadedAction?(this.$webCheckoutWrapper.removeClass(this.WebCheckoutConstants.loadingClass),_gpdc.Logger.log("Web Checkout - action to remove iFrame loader: ",n)):_gpdc.Logger.log("Web Checkout - unhandled event action: ",n)):void _gpdc.Logger.log("Web Checkout - response does not contain valid/expected data object")}},{key:"displayFailSafe",value:function(e){var t=this.$webCheckoutWrapper.data("country-failsafe-text"),n=$('<div class="text-block failsafe-wrap"><p><a href="">'.concat(t,"</a></p></div>"));if(t){var a=window.location.href;"publish"===_gpdc.config.siteRunMode&&(a=a.replace(_gpdc.config.locale,(_gpdc.user.locale||"").toLowerCase())),n.find("a").attr("href",a),n.insertAfter(e.closest(".btn-block")),te(e.parent())}}},{key:"init",value:function(){var e=this,t=$("[data-sku]"),n=_gpdc.elements.$body.data("store-disabled");if(n||!t||!t.length)return!1;var a=new Pe,i=_gpdc.user.isLoggedIn&&(_gpdc.user.legalCountry||"").toLowerCase()!==window._gpdc.config.countryCode.toLowerCase();this.userState=new Y,ee("#webcheckout__wrapper-template").then(function(n){e.$webCheckoutWrapper=$("#gdk__content .webcheckout__wrapper"),e.webCheckoutClientId=e.$webCheckoutWrapper.attr(e.clientIdAttr),$.each(t,function(t,n){var o=$(n);return i?void e.displayFailSafe(o):void o.on("click.dkWebCheckout",function(t){t.stopPropagation(),t.stopImmediatePropagation();var n=$(t.currentTarget);e.attachWebCheckoutiFrame(n.data("sku"),n.data(U.COMPONENT_INSTANCE_ID_ATTR)).then(function(){return e.toggleWebCheckout(!0)}).catch(function(e){return _gpdc.Logger.log("WebCheckout failure: ",e)}),n.is(':not([class^="cta__"])')&&a.trackClick(n)})}),_gpdc.elements.$window.on("message.dkWebCheckout",e.onWindowMessage.bind(e))}).catch(function(){return _gpdc.Logger.warn("Unable to find webcheckout HTML Template!!")}),_gpdc.Logger.logInitializer("core","components","Button Block: Web Checkout")}}]),t}(),De=function(){function t(){e(this,t)}return n(t,[{key:"init",value:function(){var e=$("[data-pxp-campaign]");if(!e||!e.length)return!1;var t=new Y;$.each(e,function(e,n){var a=$(n),i=a.data("pxp-action")||"";if(i.includes("manualForceToComplete")){var o="PXP_TASK_".concat(e);i="".concat(i,",").concat(o),a.attr({"data-pxp-action":i,id:o})}a.on("click.psexpClick",function(){return t.save(a.data(U.COMPONENT_INSTANCE_ID_ATTR))})}),_gpdc.Logger.logInitializer("core","components","Button BLock: Experience PlayStation")}}]),t}(),Oe=function(){function t(){e(this,t),this.$buttons=$(z.btnVideoSelector),this.buttonBlockTracker=new Pe,this.mediaLightBox=new pe,this.ageGate=new le}return n(t,[{key:"onClick",value:function(e){e.preventDefault();var t=$(e.currentTarget),n=t.data(),a=n.videoDam,i=n.videoYoutube,o=n.lightboxTheme,r=void 0===o?"dark":o;t.data("component","video-block"),a?t.data("src",a):t.data("video-id",i),this.ageGate.isGated(t)||(this.mediaLightBox.openMediaLightbox("singleMedia",t,null,r),this.buttonBlockTracker.trackClick(t,!0))}},{key:"addEventListeners",value:function(e){e.on("click.dkVideoButtonClick",this.onClick.bind(this))}},{key:"init",value:function(){this.$buttons.length&&(_gpdc.Logger.logInitializer("core","components","Button Block: Video"),this.addEventListeners(this.$buttons))}}]),t}(),Ne="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Be=y(function(e,t){!function(e,n){n(t)}(Ne,function(e){function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function n(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?t(Object(a),!0).forEach(function(t){s(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function r(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c.apply(this,arguments)}function l(e,t){return d(e)||u(e,t)||g(e,t)||p()}function d(e){if(Array.isArray(e))return e}function u(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,i,o=[],r=!0,s=!1;try{for(n=n.call(e);!(r=(a=n.next()).done)&&(o.push(a.value),!t||o.length!==t);r=!0);}catch(e){s=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(s)throw i}}return o}}function g(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e){return Array.isArray(e)}function v(e){return"boolean"==typeof e}var m=function(){function e(){i(this,e),this.isLocaleFirstSegment=!1,this.regexIndicator="$/",this.dataLayerName="digitalData",this.channel="web",this.homePathname="/",this.debug=!1}return r(e,[{key:"setConfiguration",value:function(e){c(this,e)}},{key:"setLocaleIsFirstSegment",value:function(e){this.isLocaleFirstSegment=e}},{key:"setDebugStatus",value:function(e){this.debug=e}}]),e}(),y=new m,k=function(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},b=function(){function e(){i(this,e)}return r(e,[{key:"logger",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=window.console[e];t&&n?a(t):t&&!n?a("GlobalDataLayer ".concat(e,": ").concat(t)):a()}},{key:"warn",value:function(e){this.logger("warn",e)}},{key:"error",value:function(e){this.logger("error",e)}},{key:"info",value:function(e){this.logger("info",e)}},{key:"log",value:function(e){this.logger("log",e)}},{key:"debug",value:function(e,t){this.logger("groupCollapsed","🕵️‍♀️ Global Data Layer: ".concat(e),!0),this.logger("log",t,!0),this.logger("groupEnd")}}]),e}(),_=new b,C=function(){var e=window.location.pathname;return y.isLocaleFirstSegment&&(e="/"===e.split("").pop()?e:"".concat(e,"/"),e=e.replace(/^.+?[\/]/,"/")),e!==y.homePathname?e:"/home"},T=function(e){var t=null,n=!1,a=C(),i=a.replace(/\/?$/,"/");return Object.keys(e).some(function(a){var o=!1;return 0===a.indexOf(y.regexIndicator)&&i.match(a.replace(y.regexIndicator,""))?(o=!0,n=!0):a.includes("*")&&i.match(new RegExp("^"+a.replace(/\//g,"\\/").replace("*","(.*)")))?o=!0:i===a.replace(/\/?$/,"/")&&(o=!0),o&&(t={key:a,match:e[a],regex:n}),o}),t},w=function(e,t){y.debug&&_.debug(e,t)},A={create:function(e){var t,n={pageInfo:{pageName:this.getPagename(e),emcid:null===e||void 0===e?void 0:e.emcid,category:{primaryCategory:this.getPrimaryCategory(e)},sysEnv:this.getDeviceType(),destinationUrl:location.href,version:null!==(t=null===e||void 0===e?void 0:e.app.env)&&void 0!==t?t:""}};return e&&w("Page",n),n},getDeviceType:function(){var e,t="web",n=null===(e=navigator.userAgent)||void 0===e?void 0:e.toLowerCase();return window.matchMedia("(max-width: 767px)").matches?t="mobile":window.matchMedia("(min-width: 768px) and (max-width: 1023px)").matches?t="tablet":n&&/playstation 4/i.test(n)?t="ps4":n&&/playstation 5/i.test(n)&&(t="ps5"),t},getPrimaryCategory:function(e){if(!e)return"";var t=C(),n="other";if(e.primaryCategory)n=e.primaryCategory;else if(e.isErrorPage)n=this.getPrimaryCategoryFromCallback(e);else if("/home"===t)n="home";else if(e.pageTypes){var a=T(e.pageTypes);if(a){var i=a.match;n=i}}return n},getPrimaryCategoryFromCallback:function(e){var t="other";if("function"!=typeof e.isErrorPage)_.warn('The "isErrorPage" parameter should be a function, '.concat(a(e.isErrorPage)," given."));else{var n=e.isErrorPage();"boolean"!=typeof n?_.warn('The "isErrorPage" function should return a boolean, '.concat(n," was given.")):n?t="error":(delete e.isErrorPage,t=this.getPrimaryCategory(e))}return t},getPagename:function(e){if(!e)return"";var t=C().toLowerCase().replace(/^\/|\/$/g,"");if(e.pageNames){var n=T(e.pageNames);if(n){var a=n.key,i=n.match,o=n.regex,r=(o?a.replace(y.regexIndicator,""):a.replace("/*","")).replace(/^\/|\/$/g,"");t=t.replace(o?new RegExp(r):r,i)}}var s=t.split("/").filter(function(e){return""!==e});return s.unshift(e.app.name),s.unshift(y.channel),s.map(k).join(":")}},E={create:function(e){var t=e?"".concat(y.channel,"-").concat(e.app.name,":").concat(e.app.version,":empty"):"";return e&&w("Page instance",t),t}},L=function(e){var t,n,a,i,o;return{subscriptionType:null!==(t=e.type)&&void 0!==t?t:null,subscriptionStatus:null!==(n=e.status)&&void 0!==n?n:null,subscriptionTier:null!==(a=e.tier)&&void 0!==a?a:null,subscriptionDuration:null!==(i=e.duration)&&void 0!==i?i:null,subscriptionFlag:null!==(o=e.flag)&&void 0!==o?o:null}},I={create:function(e){var t,n,a={visitorType:(null===e||void 0===e?void 0:e.user)?"signed_in":"guest",plusUser:null,plusSubscriptionState:null};(null===e||void 0===e?void 0:e.user)&&(a=this.setPlusSubscriptionState(a,e));var i={profile:{profileInfo:{profileID:null!==(n=null===(t=null===e||void 0===e?void 0:e.user)||void 0===t?void 0:t.id)&&void 0!==n?n:null,language:e?this.getLocale(e):"",attributes:a}}};return e&&w("User",i),i},setPlusSubscriptionState:function(e,t){var n,a,i;if("boolean"==typeof t.user.plus)return e.plusUser=t.user.plus?"plususer":"nonplususer",e;var o=[];return(null===(n=t.user.subscriptions)||void 0===n?void 0:n.plus)&&o.push(L(t.user.subscriptions.plus)),(null===(a=t.user.subscriptions)||void 0===a?void 0:a.loyalty)&&o.push(L(t.user.subscriptions.loyalty)),(null===(i=t.user.subscriptions)||void 0===i?void 0:i.ubisoftPlus)&&o.push(L(t.user.subscriptions.ubisoftPlus)),e.plusSubscriptionState=o.length?o:null,e},getLocale:function(e){var t="";return e.locale&&e.locale.includes("-")?(t=e.locale,t.split("-").reverse().join("-")):(_.warn(e.locale?"The given locale code ".concat(e.locale,' is not a valid "language-country" code.'):"The locale code is a mandatory parameter."),"invalid-locale")}},$=function(){return{page:A.create(),user:I.create(),pageInstanceID:E.create(),event:[],search:[],component:[],product:[],commerceEvent:null,cartInstance:null,productImpression:{item:[]}}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{reset:!0},t=y.dataLayerName;return e.reset&&(window[t]=$()),window[t]},x=function(e,t){var n=S({reset:!1});n.event.push(t),w(e,t)},P=["button","image","video","link","form","popup"],M=["click","impression","search","invalid-action"],D=function(){return Math.round((new Date).getTime()/1e3)},O=function(){function e(t,n){i(this,e);var a,o,r,s,c,l,d,u;t=this.transform(t),x("".concat(n," event"),{eventInfo:{eventName:t.name,timeStamp:D(),eventAction:null!==(a=t.eventAction)&&void 0!==a?a:null},attributes:{assetName:null!==(o=t.assetName)&&void 0!==o?o:null,linkURL:null!==(r=t.linkURL)&&void 0!==r?r:null,label:null!==(s=t.label)&&void 0!==s?s:null,userActionFlag:null!==(c=t.userActionFlag)&&void 0!==c&&c,moduleName:null!==(l=t.moduleName)&&void 0!==l?l:"invalid-module",elementType:null!==(d=t.elementType)&&void 0!==d?d:"invalid-element",position:null!==(u=t.position)&&void 0!==u?u:null}})}return r(e,[{key:"transform",value:function(e){return e.userActionFlag&&!v(e.userActionFlag)&&(_.warn('the "userActionFlag" value needs to be a boolean, '.concat(a(e.userActionFlag)," given.")),e.userActionFlag=!1),e.moduleName||_.warn('the "moduleName" property is required.'),e.elementType?P.includes(e.elementType)||(_.warn('the "elementType" property is invalid.'),delete e.elementType):_.warn('the "elementType" property is required.'),e.eventAction&&!M.includes(e.eventAction)&&(_.warn('the "eventAction" property is invalid.'),e.eventAction="invalid-action"),e}}]),e}(),N={create:function(e,t){new O(n(n({},t),{},{name:e,eventAction:"click"}),"Click")}},B={create:function(e,t){new O(n(n({},t),{},{name:e,eventAction:"impression"}),"Impression")}},G=r(function e(t,a,o){i(this,e);var r=S({reset:!1});a||(_.warn("".concat(t," - name is required.")),a="invalid-name");var s=n(n({},o),{},{componentInfo:n(n({},o.componentInfo),{},{componentName:a.toLowerCase()})});r.component.push(s),w(t,s)}),R="Product component",F=function(e){return e.ageRating&&!f(e.ageRating)&&(_.warn("".concat(R," - ageRating should be an array of strings, ").concat(a(e.ageRating)," given.")),delete e.ageRating),e},U={create:function(e){var t,n,a,i,o,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r=F(r),new G(R,e,{componentInfo:{componentID:null!==(t=r.sku)&&void 0!==t?t:null},category:{primaryCategory:"product"},attributes:{ageRating:r.ageRating?r.ageRating.join(","):null,developer:null!==(n=r.developer)&&void 0!==n?n:null,publisher:null!==(a=r.publisher)&&void 0!==a?a:null,releaseDate:null!==(i=r.releaseDate)&&void 0!==i?i:null,genre:null!==(o=r.genre)&&void 0!==o?o:null}})}},V=function(e,t){e.commerceEvent={eventInfo:{eventName:t}}},j=function(e){return e.genres&&Array.isArray(e.genres)&&(e.genres=e.genres.join(",")),e},H=["conceptId","id","skuIds"],z=function(e,t){var n,a,i,o,r,s,c,l,d,u,g,h,p=!0;if(H.forEach(function(e){t[e]&&(p=!1)}),p)return _.warn("Product View event not fired as ".concat(H.join(", ")," parameters are all missing.")),!1;t=j(t);var f={productInfo:{productID:null!==(n=t.id)&&void 0!==n?n:null,conceptID:null!==(a=t.conceptId)&&void 0!==a?a:null,productName:null!==(i=t.name)&&void 0!==i?i:null,productIDproductName:"".concat(t.id,":").concat(null!==(o=t.name)&&void 0!==o?o:null),productType:null!==(r=t.type)&&void 0!==r?r:null,sku:null!==(s=t.skuIds)&&void 0!==s?s:null,productGenre:null!==(c=t.genres)&&void 0!==c?c:null,productReleaseDate:null!==(l=t.releaseDate)&&void 0!==l?l:null,productPrice:null!==(u=null===(d=t.price)||void 0===d?void 0:d.toString())&&void 0!==u?u:null,currency:null!==(g=t.priceCurrency)&&void 0!==g?g:null,merchandisingCategory:null!==(h=t.merchandisingCategory)&&void 0!==h?h:null}};return e.product.push(f),f},K={init:function(e){e=Array.isArray(e)?e:[e];var t=S({reset:!1}),n=[];e.forEach(function(e){var a=z(t,e);a&&(n.push(a),w("Product view",a))}),n.length&&V(t,"product_view")}},W="Form component",Y=function(e){return e},q={create:function(e){var t,n,a,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o=Y(o),new G(W,e,{componentInfo:{componentID:null!==(t=o.id)&&void 0!==t?t:null},category:{primaryCategory:"form"},attributes:{formStep:null!==(n=o.formStep)&&void 0!==n?n:null,description:null!==(a=o.description)&&void 0!==a?a:null,formStepFlag:null!==(i=o.formStepFlag)&&void 0!==i?i:null}})}},X="Media component",J=["auto","manual"],Q=["live","vod"],Z=["short","long"],ee=function(e){return e.componentType&&!J.includes(e.componentType)&&(_.warn("".concat(X,' - "componentType" can only be one of the following values: ').concat(J.join(", "),".")),e.componentType="invalid-component-type"),e.subCategory1&&!Q.includes(e.subCategory1)&&(_.warn("".concat(X,' - "subCategory1" can only be one of the following values: ').concat(Q.join(", "),".")),e.subCategory1="invalid-sub-category"),e.format&&!Z.includes(e.format)&&(_.warn("".concat(X,' - "format" can only be one of the following values: ').concat(Z.join(", "),".")),e.format="invalid-format"),e},te={create:function(e){var t,n,a,i,o,r,s,c,l,d,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u=ee(u),new G(X,e,{componentInfo:{componentID:null!==(t=u.id)&&void 0!==t?t:null},category:{primaryCategory:"video"},attributes:{subCategory1:null!==(n=u.subCategory1)&&void 0!==n?n:null,subCategory2:null!==(a=u.subCategory2)&&void 0!==a?a:null,componentType:null!==(i=u.componentType)&&void 0!==i?i:null,componentURL:null!==(o=u.componentURL)&&void 0!==o?o:null,format:null!==(r=u.format)&&void 0!==r?r:null,network:null!==(s=u.network)&&void 0!==s?s:null,tmsChannelID:null!==(c=u.tmsChannelID)&&void 0!==c?c:null,tmsAiringID:null!==(l=u.tmsAiringID)&&void 0!==l?l:null,entryPoint:null!==(d=u.entryPoint)&&void 0!==d?d:null}})}},ne={create:function(e,t){new O(n(n({},t),{},{name:e}),"Generic")}},ae={create:function(e){x("Raw event",e)}},ie="Generic component",oe={create:function(e,t){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=null!==(a=i.id)&&void 0!==a?a:null;o&&delete i.id,t||(_.warn("".concat(ie," - the category argument is required.")),t="invalid-category"),new G(ie,e,{componentInfo:{componentID:o},category:{primaryCategory:t},attributes:n({},i)})}},re=["name","currency"],se=["cart_add","in_cart","add_pre_order","add_to_library","wishlist_add","wishlist_remove","subscribe","buy","download","upgrade"],ce=function(e,t){return t?(isNaN(t)?(_.warn('The "'.concat(e,'" parameter should be a number, ').concat(a(t)," given.")),t=0):t=parseFloat(t.toFixed(2)),t):t},le=function(e,t,n){re.forEach(function(e){n[e]||(_.warn("The ".concat(e," parameter is required.")),n[e]="invalid-".concat(e))});var i=n.name,o=n.sku,r=n.currency,s=n.category,c=n.productDiscount,l=n.productDiscountType,d=n.price;Number.isInteger(parseInt(t))||(_.warn('The "quantity" parameter should be a number, '.concat(a(t)," given.")),t=0),d=ce("price",d);var u={quantity:"string"==typeof t?parseInt(t):t,price:{basePrice:null!==d&&void 0!==d?d:null,totalBasePrice:d?d*t:null},productInfo:{productID:"".concat(i,":").concat(o),productName:i,sku:o,merchandisingCategory:s}};c&&(u.productDiscount=ce("productDiscount",c)),l&&(u.productDiscountType=l);var g={price:{currency:r.toLowerCase()},item:u};return e.cartInstance=g,g},de={init:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"cart_add";if(!se.includes(n))return void _.warn("The event name: ".concat(n," is not allowed. Allowed event names: ").concat(se.join(", "),"."));var a=S({reset:!1}),i=le(a,e,t);V(a,"".concat(n,"_").concat(Date.now())),w(n,i)}},ue=["system-error","user-error"],ge=["errorSeverity","errorCode","errorDescription"],he=function(){function e(t,n){i(this,e);var a,o,r,s=this.transform(t,n),c=l(s,2);t=c[0],n=c[1];var d=S({reset:!1}),u={errorInfo:{errorName:t},category:{primaryCategory:"error"},attributes:{errorAPIURL:null!==(a=n.errorAPIURL)&&void 0!==a?a:null,errorLocation:null!==(o=n.errorLocation)&&void 0!==o?o:null,errorType:null!==(r=n.errorType)&&void 0!==r?r:null,errorSeverity:n.errorSeverity,errorCode:n.errorCode,errorDescription:n.errorDescription}};w("Error component",u),d.component.push(u)}return r(e,[{key:"transform",value:function(e,t){return e||(_.warn("ErrorComponent - name is required."),e="invalid-error-name"),t||(t={}),ge.forEach(function(e){t[e]||(_.warn("ErrorComponent - ".concat(e," is required.")),t[e]="invalid-".concat(e))}),t.errorType&&!ue.includes(t.errorType)&&(_.warn('"errorType" can only be one of the following values: '.concat(ue.join(", "),".")),t.errorType="invalid-error-type"),[e,t]}}]),e}(),pe=function(e){return e.term?"number"!=typeof e.count?(_.warn('Search event not fired as "count" parameter is missing or not a number.'),!1):!(!e.type||!["manual","auto"].includes(e.type))||(_.warn('Search event not fired as "type" parameter is missing or invalid.'),!1):(_.warn('Search event not fired as "term" parameter is missing.'),!1)},fe={track:function(e){if(!pe(e))return!1;var t=S({reset:!1}),n={onsiteSearchTerm:e.term,onsiteSearchResults:e.count,onsiteSearchType:e.type};e.categories&&Object.keys(e.categories).forEach(function(t){var a=t.charAt(0).toUpperCase()+t.slice(1);n["onsiteSearchResults".concat(a)]=e.categories[t]}),t.search.push(n),window._satellite.track("search"),w("Search",n)}},ve=["conceptId","name","skuId"],me=function(e,t){var n,a,i,o,r,s,c,l,d,u,g,h,p,f=!0;if(ve.forEach(function(e){t[e]&&(f=!1)}),f)return _.warn("Product Impression event not fired as ".concat(ve.join(", ")," parameters are all missing.")),!1;var v={quantity:null!==(n=t.quantity)&&void 0!==n?n:1,productDiscount:null!==(i=null===(a=t.discount)||void 0===a?void 0:a.toString())&&void 0!==i?i:null,discountType:null!==(o=t.discountType)&&void 0!==o?o:null,currency:null!==(r=t.priceCurrency)&&void 0!==r?r:null,productPrice:null!==(c=null===(s=t.price)||void 0===s?void 0:s.toString())&&void 0!==c?c:null,productInfo:{conceptID:null!==(l=t.conceptId)&&void 0!==l?l:null,productID:"".concat(null!==(d=t.name)&&void 0!==d?d:null,":").concat(null!==(u=t.skuId)&&void 0!==u?u:null),productName:null!==(g=t.name)&&void 0!==g?g:null,sku:null!==(h=t.skuId)&&void 0!==h?h:null,merchandisingCategory:null!==(p=t.merchandisingCategory)&&void 0!==p?p:null}};return e.productImpression.item.push(v),v},ye={init:function(e){e=Array.isArray(e)?e:[e];var t=S({reset:!1});e.forEach(function(e){var n=me(t,e);n&&w("Product Impression",n)})}},ke={pageview:function(e){var t,n=S();e.locale&&1===location.pathname.indexOf(e.locale)?y.setLocaleIsFirstSegment(!0):y.setLocaleIsFirstSegment(!1),y.setDebugStatus(null!==(t=e.debug)&&void 0!==t&&t),n.page=A.create(e),
n.user=I.create(e),n.pageInstanceID=E.create(e)},use:function(e){return"object"!==a(e)?void _.warn("The given plugin is not a valid object."):"function"!=typeof e.install?void _.warn("The given plugin doesn't implement an install method."):void e.install(ke)},config:function(e){y.setConfiguration(e)},event:{click:N.create,impression:B.create,generic:ne.create,raw:ae.create},search:fe.track,component:{product:U.create,form:q.create,media:te.create,generic:oe.create},ecommerce:{product:{view:K.init,impression:ye.init},cart:{add:de.init}},error:function(e,t){new he(e,t)}};e.default=ke,Object.defineProperty(e,"__esModule",{value:!0})})});m(Be);var Ge,Re,Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"loyalty_page";return _gpdc.analytics._satelliteTrack(e)},Ue=function(e,t,n,a,i,o,r,s){var c=o?"close ".concat(n):s?"select sign in":"select ".concat(t);_gpdc.analytics.event.addGDLEvent("click",c,{moduleName:n,elementType:t,assetName:A.EMPTY_LABEL,linkUrl:i||A.EMPTY_LABEL,label:a,userActionFlag:!1,position:1},e),Fe(r||"loyalty_engagement")},Ve=function(){var e=$(z.btnPSNLogin);if(e.length)return _gpdc.Logger.logInitializer("core","components","Button Block: PSN Login"),window._gpdc&&_gpdc.user&&_gpdc.user.isArkhamLoggedIn?void e.remove():void e.on("click.dkPSNLoginClick",je).removeClass("display--hidden")},je=function(e){e&&e.preventDefault();var t=$(e.currentTarget);Ue(t,t.hasClass("text-link")?"link":"button",t.data("module-name")||D(t),"Log in to PSN",null,!1,"user_engagement",!0),_gpdc.config.doSignIn()},He=function(){$.each($(z.btnLinkV2Selector),ze),_gpdc.Logger.logInitializer("core","components","Button V2: Tracker")},ze=function(e,t){var n=$(t);n.is(z.btnPSNLogin)||n.is(z.btnLoyalty)||(n.on("click.dkButtonV2Tracker",Ke),se(n))},Ke=function(e){var t=$(e.currentTarget),n=t.data("track-js");if(n){_gpdc.analytics.commerce.updateInternalLinkHref({},e.currentTarget,n.attributes.moduleName,n.attributes.label,!0);var a=t.attr("href")||"",i="_blank"===t.attr("target");!i&&e.preventDefault(),We(t,n,a),i||(window.location.href=a)}},We=function(e,t,n){if(e.data(U.DTM_IGNORE_EVENT))return void e.data(U.DTM_IGNORE_EVENT,!1);var a="user_engagement";t.attributes.label=String(t.attributes.label).trim().replace(/\s+/g,"-").toLowerCase(),H(n)?(a="store_click",t.attributes.userActionFlag=!1,t.eventInfo.eventName="select store button"):t.attributes.userActionFlag=!0,_gpdc.analytics.event.addRawEvent(e,t.eventInfo,t.attributes),_gpdc.analytics._satelliteTrack(a)},Ye=function(){function t(){e(this,t),this.ageGate=new le}return n(t,[{key:"init",value:function(){var e=new Me,t=new De,n=new Pe,a=new Oe;a.init(),e.init(),t.init(),n.init(),Ve(),He(),this.aemPatch(),this.applyAgeGate()}},{key:"applyAgeGate",value:function(){var e=this,t=$("".concat(z.btnBlockGated,", ").concat(z.btnBlockGatedForce));t.on("click.dkBtnBlock",function(t){var n=$(t.currentTarget);e.ageGate.isGated(n)&&e.ageGate.triggerIfNeeded(n,t).then(function(){n[0].click()}).catch(function(){return _gpdc.Logger.log("Age gate failed on Button.")})})}},{key:"aemPatch",value:function(){var e=$(z.btnBlock);(e||e.length)&&$.each(e,function(e,t){var n=$(t),a=n.parent();if(a.hasClass("buttonblock")){var i=n.attr("class").split(/\s+/);$.each(i,function(e,t){t.includes("--auto")&&a.addClass(t)})}})}}]),t}(),qe=n(function t(){e(this,t),re(null,["mobile","tablet","desktop"],"width"),_gpdc.Logger.logInitializer("core","components","Blocks")}),Xe=function(){function t(){e(this,t),this.init()}return n(t,[{key:"removeNavFooter",value:function(){$("#sony-bar").remove(),$("#shared-nav-root").remove(),$("#jetstream-tertiary-nav").remove(),$(".gdk .site-footer, .gdk .site-footer-v2").remove()}},{key:"addStickyBehavior",value:function(e,t){window.sharedNav&&window.sharedNav.makeSticky(t.length?t[0]:e[0])}},{key:"addTerNavAnchorsActiveLogic",value:function(e){var t=e.find("a.tertiary-tab__link");$.each(t,function(t,n){$(n).on("click.pdcTertiaryNav",function(t){var n=t.currentTarget;e.find("a.tertiary-tab__link--active").removeClass("tertiary-tab__link--active"),$(n).addClass("tertiary-tab__link--active")})})}},{key:"init",value:function(){var e="hide"===sessionStorage.getItem(_.navFooter);if(e)return void this.removeNavFooter();var t=$("#shared-nav-container"),n=$("#jetstream-tertiary-nav");t&&t.length&&(this.addStickyBehavior(t,n),this.addTerNavAnchorsActiveLogic(n)),_gpdc.Logger.logInitializer("core","components","Jetstream Tertiary Nav")}}]),t}(),Je=function(){function t(){e(this,t)}return n(t,[{key:"addWaypointAnimation",value:function(e,t){if(C.IS_LANDSCAPE){var n=e.data("tablet-up-animation-class");if(!n)return;var a=new Waypoint({element:e.get(0),handler:function(){t.addClass(n),a.destroy()},offset:"90%"})}else{var i=e.data("mobile-animation-class");if(!i)return;$.each(t,function(e,t){var n=new Waypoint({element:t,handler:function(){$(t).addClass(i),n.destroy()},offset:"90%"})})}}},{key:"applyAnimations",value:function(e,t,n){var a=e.data("grid-animation-".concat(n))||"";if(a){if("tablet-up"===n){var i=e.data("grid-animation-delay-step")||.2,o=e.data("grid-animation-sequence")||"";$.each(t,function(e,n){var a="disabled"===o?0:"reversed"===o?t.length-e-1:e;$(n).css("--animation-delay","".concat(a*i,"s"))})}e.data("".concat(n,"-animation-class"),a)}}},{key:"processContentGrids",value:function(e){var t=this;$.each(e,function(e,n){var a=$(n),i=a.find('div[class^="box"]');t.applyAnimations(a,i,"mobile"),t.applyAnimations(a,i,"tablet-up"),t.addWaypointAnimation(a,i)})}},{key:"init",value:function(){var e=$(".content-grid");e.length&&this.processContentGrids(e),_gpdc.Logger.logInitializer("core","components","Content Grid")}}]),t}(),Qe=function(){function t(){e(this,t),this.formMessage="form__message",this.input="input",this.inputItem="".concat(this.input,"__item"),this.inputError="".concat(this.input,"__error"),window._gpdc.components.form=this,this.init()}return n(t,[{key:"addInputItemHandlers",value:function(e){var t=this,n="input[type=text],input[type=number],input[type=email],input[type=password],select",a=this.inputItem,i=".".concat(a),o="".concat(a,"--focused"),r="".concat(a,"--filled");e.find(n).each(function(e,n){var a=$(n);""!==a.val()&&a.closest(".".concat(t.inputItem)).addClass(r)}).on("focus.dkInput",function(e){var t=e.currentTarget;$(t).closest(i).addClass(o)}).on("blur.dkInput",function(e){var t=e.currentTarget,n=$(t),a=n.closest(i),s=n.val();""===s?a.removeClass(r):a.addClass(r),a.removeClass(o)})}},{key:"addFormValidationHandlers",value:function(e){var t=".".concat(this.input),n=".".concat(this.inputError),a={errorsContainer:function(e){var a=e.$element.closest(t);if(a.length){var i=a.find(n);return i.empty(),i}return e}},i=this.inputItem,o=".".concat(this.inputItem),r="".concat(i,"--success"),s="".concat(i,"--error"),c="[class$='server-validation-error']";e.parsley().destroy(),e.parsley(a).on("field:error",function(e){e.$element.closest(t).find(c).remove(),e.$element.closest(o).removeClass(r).addClass(s),e.$element.attr("aria-invalid","true")}).on("field:success",function(e){e.$element.closest(o).removeClass(s).addClass(r),e.$element.attr("aria-invalid","false")}).on("form:submit",function(t){var n=new Pe;return n.trackClick(e.find("[type=submit]")),!0})}},{key:"addTextAreaLetterCounter",value:function(e){var t=".".concat(this.input);e.find("textarea").each(function(e,n){var a=$(n),i=a.closest(t).find(".current");a.on("keyup.dkInput",function(){i.text(a.val().length)})})}},{key:"init",value:function(){var e=this,t=$('[data-component="form"]');t&&t.length&&($.each(t,function(t,n){var a=$(n),i=a.data("bound")||!1;i||(e.addInputItemHandlers(a),e.addFormValidationHandlers(a),e.addTextAreaLetterCounter(a),a.data("bound",!0))}),_gpdc.Logger.logInitializer("core","components","Forms"))}}]),t}(),Ze=function(){function t(){e(this,t)}return n(t,[{key:"addEventListeners",value:function(e){var t=e,n=t.find(".form__view--1"),a=t.find(".form__view--2"),i=t.find(".form__view--3"),o=1200,r=new Pe;a.find(".input__field").on("click.dkForm",function(e){r.trackClick($(e.currentTarget)),t.submit()}),$(".input__item--icon-smile .input__field").on("click.dkForm",function(e){r.trackClick($(e.currentTarget)),t.submit()}),$(".input__item--icon-frown .input__field").on("click.dkForm",function(e){r.trackClick($(e.currentTarget)),a.fadeIn(o)}),t.on("submit.dkForm",function(e){e.preventDefault(),n.hide(),a.hide(),i.fadeIn(o)})}},{key:"init",value:function(){var e=this,t=$('[data-component="form-feedback"]');t.length&&($.each(t,function(t,n){var a=$(n);e.addEventListeners(a)}),_gpdc.Logger.logInitializer("core","components","Form Feedback"))}}]),t}(),et=function(){function t(){e(this,t),_gpdc.Logger.logInitializer("core","components","Search Bar"),this.bind()}return n(t,[{key:"bind",value:function(){this._onFormSubmit=this._onFormSubmit.bind(this),this._onInputKeyUp=this._onInputKeyUp.bind(this),this._onInputFocus=this._onInputFocus.bind(this),this._onInputBlur=this._onInputBlur.bind(this),this._onSubmitClick=this._onSubmitClick.bind(this),this._onClearClick=this._onClearClick.bind(this)}},{key:"init",value:function(){var e="dkSearchBar",t=$(".search-bar__input");this.$form=$('[name="gdk-search-box"]'),this.$form.on("submit.".concat(e),this._onFormSubmit),t.on("keyup.".concat(e),this._onInputKeyUp).trigger("keyup.".concat(e)),t.on("focus.".concat(e),this._onInputFocus),t.on("blur.".concat(e),this._onInputBlur),t.data("bar-keyup-event-name","keyup.".concat(e)),$(".search-bar__submit").on("click.".concat(e),this._onSubmitClick),$(".search-bar__clear").on("click.".concat(e),this._onClearClick)}},{key:"_onInputFocus",value:function(e){this.$form.addClass("border--active")}},{key:"_onInputBlur",value:function(e){this.$form.removeClass("border--active")}},{key:"_onFormSubmit",value:function(e){e.preventDefault();var t=this.$form.attr("action");if(t&&location.pathname!==t){var n=this.$form.serializeArray(),a=n.find(function(e){return"q"===e.name});if(a&&a.value){var i=n.filter(function(e){return!!e.value&&(e.value=window.htmlEncode(e.value),!0)});location.href="".concat(t,"?").concat($.param(i))}}}},{key:"_onInputKeyUp",value:function(e){var t=e.currentTarget.value,n=$(e.currentTarget),a=n[0],i="search-bar__clear--active";a.$clear||(a.$clear=n.parent().find(".search-bar__clear")),t&&!a.$clear.hasClass(i)?a.$clear.addClass(i):!t&&a.$clear.hasClass(i)&&a.$clear.removeClass(i)}},{key:"_onSubmitClick",value:function(e){e.preventDefault(),$(e.currentTarget).closest("form").trigger("submit")}},{key:"_onClearClick",value:function(e){e.preventDefault();var t=$(e.currentTarget).removeClass("search-bar__clear--active").prevAll(".search-bar__input");t[0].cleared=!0,t.val(""),t.trigger("keydown")}}]),t}(),tt=function(){function t(){e(this,t)}return n(t,[{key:"init",value:function(){var e=$('[data-component="cookie-launcher"]');return!(!e||!e.length)&&(e.on("click.dkCookie",function(){window.evidon&&window.evidon.notice.showOptions()}),void _gpdc.Logger.logInitializer("core","components","Cookie Launcher"))}}]),t}(),nt=function(){function t(){e(this,t)}return n(t,[{key:"init",value:function(){_gpdc.Logger.logInitializer("core","components","A11y"),_gpdc.elements.$document.on("keydown.dkA11yEnter",'div[role="button"]',function(e){"Enter"===e.key?$(e.currentTarget).trigger("click"):" "===e.key&&(e.preventDefault(),$(e.currentTarget).trigger("click"))})}}]),t}(),at=function(){function t(){e(this,t),this.videoEqualsQueryParamRegex=new RegExp("video=")}return n(t,[{key:"autoloadVideo",value:function(e){var t=new URLSearchParams(e)||{},n=t.get("video"),a=$(".video-autoload-template"),i=a.find('[data-auto-load-query="'+n+'"]');if(i&&i.length){var o=new _gpdc.components.VideoButton;o.addEventListeners(a.find(z.btnVideoSelector)),i.click()}}},{key:"init",value:function(){var e=this,t=window.location&&window.location.search||"";t&&this.videoEqualsQueryParamRegex.test(t)&&(ee("#video-autoload__template").then(function(n){e.autoloadVideo(t)}).catch(function(e){_gpdc.Logger.warn("Unable to find VideoAutoload HTML Template!!")}),_gpdc.Logger.logInitializer("core","components","Video Autoload"))}}]),t}(),it=function(){function t(){e(this,t),this.ALERT_SHOW_DELAY=1e3,this.ALERT_COOKIE_PREFIX="pdcAlert",this.ALERT_COOKIE_TIMEOUT_OFFSET=6048e5,this.ALERT_PINNED_CLASS="pinned-top",this.fadeInAlertsWrapper=!1,this.$els={sonyBar:$("#sony-bar:not(.dk-nav__wrapper)"),tertiary:$("#jetstream-tertiary-nav .tertiary-container")}}return n(t,[{key:"init",value:function(){var e=this,t=$('[data-component="alerts"]');if(t.length){this.hashAnchor=new G;var n=t.eq(0),a=n.find(".alerts__item");n.css("--alert-top","".concat(this.hashAnchor.calculateNavigationOffset()+this.getSonyBarOffset(),"px")),n.css("--alert-top-pinned",this.$els.tertiary.length||!w.IS_JETSTREAM_MOBILE?"64px":"60px"),$.each(a,function(t,a){return e.processAlerts(n,$(a),t)}),this.fadeInAlertsWrapper&&setTimeout(function(){n.addClass("in"),$.each(a,function(t,n){return e.trackAlertEvent($(n),"impression","alert impression","image")})},this.ALERT_SHOW_DELAY),_gpdc.Logger.logInitializer("core","components","Alerts")}}},{key:"processAlerts",value:function(e,t,n){return this.shouldDisplayAlert(t)?(this.fadeInAlertsWrapper=!0,t.data("analytics-position",n+1),this.pinAlertToTop(e),void this.addListeners(e,t)):void t.remove()}},{key:"shouldDisplayAlert",value:function(e){var t=I(this.ALERT_COOKIE_PREFIX+(e.data("alert-id")||""));if(t)return!1;var n=new Date((new Date).toUTCString()).getTime(),a=e.data("start-time"),i=e.data("end-time");return a&&i&&a<n&&i>n}},{key:"addListeners",value:function(e,t){var n=this,a=t.find(".alerts__item__collapsable"),i=t.find(".alerts__item__link"),o=t.find(".alerts__item__close");_gpdc.elements.$window.scroll(function(){return n.pinAlertToTop(e)}),w.IS_LAPTOP||a.on("click.dkAlertsExpand",function(e){var t=e.currentTarget,a=$(t),i=a.parent();i.toggleClass("collapsed"),i.hasClass("collapsed")||n.trackAlertEvent(a,"click","expand alert","image")}),o.on("click.dkAlertsClose",function(e){var t=e.currentTarget,a=$(t);n.persistAlertDismissal(a),n.trackAlertEvent(a,"click","close alert","button")}),i.length&&i.on("click.dkAlertsLink",function(e){e.preventDefault();var t=$(e.currentTarget),a=t.attr("href");B(a)&&(n.persistAlertDismissal(t),window.open(a,"_blank")),n.trackAlertEvent(t,"click","select alert link","link")})}},{key:"pinAlertToTop",value:function(e){e[_gpdc.elements.$window.scrollTop()>0?"addClass":"removeClass"](this.ALERT_PINNED_CLASS)}},{key:"persistAlertDismissal",value:function(e){var t=e.closest(".alerts__item"),n=t.data("alert-id")||"",a=t.data("end-time")+this.ALERT_COOKIE_TIMEOUT_OFFSET,i=Math.floor((a-(new Date).getTime())/6e4);t.remove(),n&&L(this.ALERT_COOKIE_PREFIX+n,"dismissed",i)}},{key:"getSonyBarOffset",value:function(){return this.$els.sonyBar.length&&!w.IS_JETSTREAM_MOBILE?this.$els.sonyBar.outerHeight():0}},{key:"trackAlertEvent",value:function(e,t,n,a){_gpdc.analytics.event.addGDLEvent(t,n,{userActionFlag:"click"===t,moduleName:"alert",label:e.data("analytics-label")||A.EMPTY_LABEL,position:e.data("analytics-position"),linkUrl:A.EMPTY_LABEL,assetName:A.EMPTY_LABEL,elementType:a},e),_gpdc.analytics._satelliteTrack("user_engagement")}}]),t}(),ot=function(){function t(){e(this,t),this.activeSlideId=0,this.rotateInterval=null,this.keepRotation=!1,this.$slider=null,this.$controlsWrapper=null,this.$controls=null,this.$slides=null,this.isAutoRotationEnabled=null,this.displayHidden="display--hidden",this.autoRotateEventDataAttr="auto-rotate-event",this.bannersTracked=[]}return n(t,[{key:"init",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&e.length?(this.$slider=e,this.$controlsWrapper=this.$slider.find(".slider__controls"),this.$controls=this.$slider.find(".slider__control"),this.$slides=this.$slider.find(".slider__slide"),this.componentType=this.$slider.data("component"),this.isAutoRotationEnabled=this.$slider.data("auto-rotate"),this.options=n,this.addEventHandlers(),this.setControlsHeight(),this.$slider.attr("aria-live","polite"),this.isAutoRotationEnabled&&(this.keepRotation=!0,this.configureAutoRotate()),this.options.impressionCallback&&setTimeout(function(){t.options.impressionCallback(t.$slides.eq(0),1,t.bannersTracked)},200),void _gpdc.Logger.logInitializer("core","components","Slider")):void _gpdc.Logger.log("Invalid params, Slider not initialized!")}},{key:"addEventHandlers",value:function(){var e=this;this.$controlsWrapper.on("change.flickity",this.updateSlide.bind(this)),this.$controls.on("click.dkSliderControlClick",function(t){var n=t.currentTarget;return e.updateSlide($(n))}),this.$controls.hover(function(t){var n=t.currentTarget;C.IS_TABLET&&e.$controls.not($(n)).find("figure").addClass("not-hovered")},function(){C.IS_TABLET&&e.$controls.find("figure").removeClass("not-hovered")})}},{key:"setControlsHeight",value:function(){var e=this;C.IS_DESKTOP||(this.$slider.css("--controls-wrapper-height",this.$controlsWrapper.outerHeight()),_gpdc.elements.$window.on("resize.slider",function(){return e.$slider.css("--controls-wrapper-height",e.$controlsWrapper.outerHeight())}))}},{key:"configureAutoRotate",value:function(){var e=this;setTimeout(function(){e.keepRotation&&(e.$slider.data(e.autoRotateEventDataAttr,!0),e.triggerUpdateSlide(),e.rotateInterval=setInterval(function(){e.$slider.data(e.autoRotateEventDataAttr,!0),e.triggerUpdateSlide()},e.$slider.data("other-slides-display-time")||3e3))},this.$slider.data("first-slide-display-time")||6e3)}},{key:"triggerUpdateSlide",value:function(){this.activeSlideId++,this.activeSlideId>this.$controls.length&&(this.activeSlideId=1),this.$controlsWrapper.hasClass("flickity-enabled")?this.$controlsWrapper.flickity("select",this.activeSlideId-1,!0,!1):this.$controls.filter('[data-control-id="'.concat(this.activeSlideId,'"]')).click()}},{key:"updateSlide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.keepRotation=this.clearAutoRotatation();var t=e.length?e:this.$controls.filter(".is-selected"),n=t.data("control-id"),a=this.$slider.find("[data-slide='".concat(n,"'], [data-slide-id='").concat(n,"']"));if(C.IS_MOBILE&&this.$controls.closest(".slider__controls.carousel").flickity("selectCell",n-1),this.activeSlideId=n,this.$controls.removeClass("is-selected"),t.addClass("is-selected"),this.$slides.not(".".concat(this.displayHidden)).addClass(this.displayHidden),a.removeClass(this.displayHidden),a.find('[data-carousel="true"]').flickity("resize"),this.$slider.hasClass("product-picker")){var i="div[class*=slider__control--]";this.$controls.find(i).removeClass("is-selected"),t.find(i).addClass("is-selected")}"hp-hero"==this.componentType&&this.options.impressionCallback(a,n,this.bannersTracked,0),"featured-hardware"===this.componentType&&this.options.clickCallback(a,t),"image-comparison-slider-gallery"===this.componentType&&this.options.clickCallback(a,t),"spin-set"===this.componentType&&this.options.clickCallback(a,t)}},{key:"clearAutoRotatation",value:function(){var e=this.$slider.data(this.autoRotateEventDataAttr);return e?(this.$slider.data(this.autoRotateEventDataAttr,!1),!0):!(!this.isAutoRotationEnabled||e)&&(clearInterval(this.rotateInterval),!1)}}]),t}(),rt=function(){function t(){e(this,t),_gpdc.Logger.logInitializer("core","components","Pagination")}return n(t,[{key:"api",value:function(e){var t=$(this),n=t.data("pages");if("select"===e){for(var a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];var r=i[0];if(t[0].$blips.removeClass("pagination__blip--active"),t.find('[data-page="'.concat(r,'"]')).addClass("pagination__blip--active"),r>=9&&t[0].pages>9&&r<t[0].pages-1){var s=Math.abs(9-r);t[0].$slider.css("transform","translateX(calc(((var(--blip-width) * ".concat(s+1,") + (var(--blip-gap) * ").concat(s+1,")) * -1))"))}else r<9?t[0].$slider.css("transform","translateX(0)"):r===n&&t[0].$slider.css("transform","translateX(calc(((var(--blip-width) * ".concat(r-10,") + (var(--blip-gap) * ").concat(r-10,")) * -1))"))}}},{key:"initPaginator",value:function(e,t){var n=$(t),a=n.data("pages");n[0].pagination=this.api.bind(t),n[0].pages=a,n[0].$blips=n.find(".pagination__blip"),n[0].$slider=n.find(".pagination__slider"),n[0].$blips.on("keydown.dkPagination",function(e){"Enter"===e.key&&$(e.currentTarget).trigger("click")}),n[0].$blips.on("click.dkPagination",function(e){var t=$(e.currentTarget);if(t.attr("href"));else{e.preventDefault(),n[0].$blips.removeClass("pagination__blip--active"),t.addClass("pagination__blip--active");var i=t.data(),o=i.page;if(n.trigger("change.dkPagination",[o,e]),o>=9&&a>9&&o<a-1){var r=Math.abs(9-o);n[0].$slider.css("transform","translateX(calc(((var(--blip-width) * ".concat(r+1,") + (var(--blip-gap) * ").concat(r+1,")) * -1))"))}else o<9?n[0].$slider.css("transform","translateX(0)"):o===a&&n[0].$slider.css("transform","translateX(calc(((var(--blip-width) * ".concat(o-10,") + (var(--blip-gap) * ").concat(o-10,")) * -1))"))}}),n[0].$blips.filter(".pagination__blip--active").trigger("click")}},{key:"init",value:function(){var e=$('[data-component="pagination"]');e.length&&e.each(this.initPaginator.bind(this))}}]),t}(),st=function(){function t(){e(this,t),this.hashAnchor=new G}return n(t,[{key:"addListeners",value:function(e){var t=$('div[data-component="pills"]');t.each(function(t,n){var a=$(n);a.find(".pills__item").on("click.dkPillsClick",function(e){var t=$(e.currentTarget);t.hasClass("pills__item--active")||(a.trigger("change.dkPills",[t,e]),t.attr("href")||(t.addClass("pills__item--active").attr("aria-selected","true").trigger("blur").siblings().removeClass("pills__item--active").attr("aria-selected","false"),oe(a,t)))}),a.data("sticky")&&(a.css("--sticky-top","".concat(e,"px")),a.addClass("pills--sticky"))})}},{key:"init",value:function(){var e=this.hashAnchor.calculateNavigationOffset();this.addListeners(e),_gpdc.Logger.logInitializer("core","components","Pills")}}]),t}(),ct=function(){function t(){e(this,t),this.selectors={component:'[data-component="exclusive-badge"]',targetId:"legal-text-target-id",legalText:"data-exclusive-badge-id",expiration:"expiration",legalMessage:"legal-message",dateToken:":expirationDate"}}return n(t,[{key:"init",value:function(){var e=$(this.selectors.component);e.length&&($.each(e,this.processExclusiveBadge.bind(this)),_gpdc.Logger.logInitializer("core","components","Exclusive Badge"))}},{key:"processExclusiveBadge",value:function(e,t){var n=$(t),a=n.data(this.selectors.targetId)||"",i=n.data(this.selectors.expiration)||"",o=n.data(this.selectors.legalMessage)||"",r=a?_gpdc.elements.$body.find("[".concat(this.selectors.legalText,'="').concat(a,'"]')):[];return r.length&&o?(o.includes(this.selectors.dateToken)&&(o=o.replace(this.selectors.dateToken,i)),void r.html(o)):void _gpdc.Logger.log("Exclusive Badge | Either No matching legal text wrapper found or no legal message authored")}}]),t}(),lt=function(){function t(){e(this,t),_gpdc.Logger.logInitializer("core","components","Nav accordion")}return n(t,[{key:"updateNavAccordions",value:function(e,t,n){return e?(null===t||t)&&(t=!1,n.length&&n.each(function(e,t){var n=$(t);n.attr("role","button"),0===e?(n.attr("aria-expanded","true"),n.parent().find(".nav-list").slideDown(300)):(n.attr("aria-expanded","false"),n.parent().find(".nav-list").slideUp(0))})):null!==t&&t||(t=!0,n.length&&n.each(function(e,t){var n=$(t);n.attr({"aria-expanded":null,role:"heading"}),n.parent().find(".nav-list").slideDown(0)})),t}},{key:"addClickHandlers",value:function(e){e.on("click",function(e){e.stopPropagation(),e.preventDefault();var t=e.target;if(t.getAttribute("aria-expanded")){var n="true"===t.getAttribute("aria-expanded").toLowerCase();n?($(t).attr("aria-expanded","false"),$(t).parent().find(".nav-list").stop().slideUp(300)):($(t).attr("aria-expanded","true"),$(t).parent().find(".nav-list").stop().slideDown(300))}})}},{key:"setupAndAddClickHandlers",value:function(){var e=this,t=$('[data-component="footer-nav"]');if(t.length&&T&&T.IS_MOBILE_PORTRAIT){var n=this.updateNavAccordions(w.IS_MOBILE_PORTRAIT,null,t);this.addClickHandlers(t);try{T.IS_MOBILE_PORTRAIT.addEventListener("change",function(a){var i=a.matches;n=e.updateNavAccordions(i,n,t)})}catch(e){}}}},{key:"init",value:function(){this.setupAndAddClickHandlers(),_gpdc.Logger.logInitializer("core","components","Footer Accordion")}}]),t}(),dt=function(){var e=$('[data-component="page-hero"]');e.length&&(_gpdc.Logger.logInitializer("core","components","Page Banner"),e.each(ut))},ut=function(e,t){var n=$(t);ie(n,"custom-theme","--ph-gradient-start",!0,!1,!0),gt(n)},gt=function(e){var t=e.find(".page-hero-gradient .content-override:visible .media-block");_gpdc.analytics.event.addGDLEvent("impression","page-hero",{userActionFlag:!1,moduleName:"page-hero",label:A.EMPTY_LABEL,assetName:t.data("analytics-asset")||A.EMPTY_LABEL,elementType:t.hasClass("+inline-video")?"video":"image"},e)},ht=function(e){var t=M('[data-component="content-spacer"]',e);t.length&&(re(t,["mobile","tablet-large","desktop"],"height"),_gpdc.Logger.logInitializer("core","components","Content Spacer"))},pt=function(){_gpdc.Logger.logInitializer("core","components","Flickity Overrides"),Flickity.prototype._createResizeClass=function(){this.element.classList.add("flickity-resize")},Flickity.createMethods.push("_createResizeClass");var e=Flickity.prototype,t=e.resize,n=e.setCellAlign,a=e.onresize;Flickity.prototype.resize=function(){this.element.classList.remove("flickity-resize"),t.call(this),this.element.classList.add("flickity-resize")},Flickity.prototype.onresize=function(){this.setCellAlign(),a.call(this)},Flickity.prototype.setCellAlign=function(){return"grid"===this.options.cellAlign?void(this.options.forceCenter&&this.options.forceCenter.map(function(e){return e.matches}).some(Boolean)?this.cellAlign=.5:this.cellAlign="left"===this.originSide?0:1):void n.call(this)},Flickity.prototype.positionSlider=function(){var e=this.x;"grid"!==this.options.cellAlign||this.options.forceCenter&&this.options.forceCenter.map(function(e){return e.matches}).some(Boolean)||(e+=this.options.getGridMarginSize()),this.options.wrapAround&&this.cells.length>1&&(e=fizzyUIUtils.modulo(e,this.slideableWidth),e-=this.slideableWidth,this.shiftWrapCells(e)),this.setTranslateX(e,this.isAnimating),this.dispatchScrollEvent()}},ft=function(e){var t=M('[data-component="clickable-tiles"]',e);t.length&&($.each(t,vt),_gpdc.Logger.logInitializer("core","components","Clickable Tiles"))},vt=function(e,t){var n=$(t).find(".clickable-tiles__tile-content a.surface");$.each(n,mt)},mt=function(e,t){var n=$(t);n.on("click.DKClickableTiles",function(){var e=n.data("track");e&&(_gpdc.analytics.event.addRawEvent(n,e.eventInfo,e.attributes),_gpdc.analytics._satelliteTrack("user_engagement"))})},yt=function(e){return'\n        <svg viewBox="0 0 64 64" role="img" focusable="false" aria-hidden="true">\n            <use href="'.concat(e,'#ps-icon_utility_cancel-copy"></use>\n        </svg>\n        ')},kt=function(e){return'\n        <div class="txt-block-title txt-block-title--large country-selector__title mt--none ">\n            <div class="icon txt-block-title__sticker ">\n                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 128">\n                    <g transform="translate(16 32)">\n                        <path d="M118.118836 12.5186944L102.146451 12.5186944C102.082678 12.5182548 102.028765 12.5658246 102.021264 12.6291566L102.021264 50.0011506C102.025168 50.0673981 102.080089 50.1189738 102.146451 50.1189738L108.619354 50.1189738C108.681534 50.1150799 108.729935 50.0634519 108.729813 50.0011506L108.729813 16.6940513C108.729813 16.6572316 108.729813 16.6351398 108.773997 16.6351398L116.18212 16.6351398C118.884686 16.6351398 120.364838 19.3524336 120.364838 24.2789092 120.364838 29.2053849 118.89205 31.9374065 116.18212 31.9374065L111.719573 31.9374065C111.657393 31.9413002 111.608992 31.9929283 111.609114 32.0552295L111.609114 35.9360258C111.604513 35.9671458 111.614373 35.9986634 111.635889 36.0216134 111.657404 36.0445634 111.688221 36.056434 111.719573 36.0538488L118.111472 36.0538488C120.442418 36.013773 122.645117 34.9794157 124.164631 33.2113681 126.057163 31.0831895 127.051295 28.0050627 127.051295 24.3230929 127.051295 17.1800713 123.560788 12.5407893 118.111472 12.5407893M137.648004 12.5184533L131.167737 12.5184533C131.136474 12.5166822 131.105695 12.5272008 131.082204 12.5479283 131.058713 12.5686559 131.044444 12.5978855 131.042551 12.6291566L131.042551 50.0011506C131.046454 50.0673981 131.101375 50.1189738 131.167737 50.1189738L137.648004 50.1189738C137.711509 50.1153361 137.76219 50.0646548 137.765827 50.0011506L137.765827 12.6365205C137.761934 12.5743409 137.710306 12.5259396 137.648004 12.5260614M165.903441 21.620527C165.899538 21.5542795 165.844616 21.5027038 165.778254 21.5027038L154.238961 21.5027038C143.929445 21.5027038 142.57448 29.0949258 142.57448 35.7740191L142.57448 41.5399839C142.57448 46.5106432 145.659971 50.1189738 149.93842 50.1189738L156.234588 50.1189738C156.296768 50.1150799 156.345169 50.0634519 156.345047 50.0011506L156.345047 46.1277183C156.345169 46.065417 156.296768 46.013789 156.234588 46.0098953L151.698401 46.0098953C150.66745 46.0098953 149.268301 45.553331 149.268301 41.9891842L149.268301 35.7666552C149.268301 31.6207571 149.651226 28.9771027 150.512807 27.4674951 151.440664 25.8032447 152.906088 25.5823265 154.194777 25.5823265L159.113889 25.5823265C159.113889 25.5823265 159.150708 25.5823265 159.158072 25.6412381 159.165436 25.7001496 159.158072 50.0011506 159.158072 50.0011506 159.158072 50.0662225 159.210823 50.1189738 159.275895 50.1189738L165.741434 50.1189738C165.807797 50.1189738 165.862718 50.0673981 165.866621 50.0011506L165.866621 21.620527 165.903441 21.620527zM212.509815 28.1597054L209.313866 27.9166954C206.920585 27.7105051 205.145876 26.384996 205.145876 22.46738 205.145876 17.8870096 207.200415 16.6351398 209.939801 16.6351398L218.776528 16.6351398C218.837478 16.6319638 218.887254 16.5852987 218.894351 16.5246807L218.894351 12.6365205C218.887254 12.5759025 218.837478 12.5292375 218.776528 12.5260614L209.019308 12.5260614C202.988241 12.5260614 198.709792 16.0681164 198.709792 23.1227707L198.709792 23.4246922C198.709792 28.9918306 202.134024 32.9978138 207.244599 33.4028305L210.418457 33.6384766C212.841193 33.8225751 214.3508 35.9875734 214.3508 39.2718905L214.3508 40.1997469C214.3508 42.254286 213.835325 46.0172592 209.424325 46.0172592L200.241492 46.0172592C200.179312 46.021153 200.130911 46.072781 200.131033 46.1350823L200.131033 50.0011506C200.130911 50.0634519 200.179312 50.1150799 200.241492 50.1189737L211.633507 50.1189737C215.146106 50.1189737 221.02253 48.6977333 221.02253 39.1393395 221.02253 35.6856518 220.234588 32.9536302 218.643977 30.9800944 217.281648 29.2937522 215.271293 28.3732597 212.509815 28.1597054M265.567001 21.620527C265.567001 21.5554551 265.51425 21.5027039 265.449178 21.5027039L253.887793 21.5027039C243.578277 21.5027039 242.230676 29.0949258 242.230676 35.7740191L242.230676 41.5399839C242.230676 46.5106432 245.316167 50.1189737 249.594616 50.1189737L255.868692 50.1189737C255.932197 50.1153361 255.982878 50.0646548 255.986516 50.0011506L255.986516 46.1277183C255.982878 46.0642142 255.932197 46.0135329 255.868692 46.0098953L251.369325 46.0098953C250.338374 46.0098953 248.953953 45.553331 248.953953 41.9891842L248.953953 35.7666552C248.953953 31.6207571 249.336878 28.9771027 250.183731 27.4674951 251.111587 25.8032447 252.591739 25.5823265 253.865701 25.5823265L258.799541 25.5823265C258.799541 25.5823265 258.843724 25.5823265 258.851088 25.6412381L258.851088 50.0011506C258.851088 50.0662225 258.903839 50.1189737 258.968911 50.1189737L265.441814 50.1189737C265.503994 50.1150799 265.552395 50.0634519 265.552273 50.0011506L265.567001 21.620527zM239.535474 21.5027039L232.510276 21.5027039C232.488785 21.4990735 232.473152 21.4803137 232.473456 21.4585203L232.473456 16.7529628C232.473456 16.687891 232.420705 16.6351396 232.355633 16.6351396L225.890094 16.6351396C225.823732 16.6351396 225.768811 16.6867154 225.764907 16.7529628L225.764907 41.5473478C225.764907 46.5106432 228.857762 50.1189738 233.128847 50.1189738L237.760765 50.1189738C237.827127 50.1189738 237.882048 50.0673981 237.885952 50.0011506L237.885952 46.1350823C237.885952 46.0659434 237.829904 46.0098953 237.760765 46.0098953L234.91092 46.0098953C234.174526 46.0098953 232.473456 45.9657117 232.466092 42.3279254L232.466092 25.6117823C232.466092 25.5914473 232.482577 25.5749626 232.502912 25.5749626 234.660546 25.5749626 239.535474 25.5749626 239.535474 25.5749626 239.597776 25.5750844 239.649404 25.5266831 239.653297 25.4645035L239.653297 21.620527C239.653297 21.5892784 239.640884 21.5593096 239.618788 21.5372135 239.596692 21.5151174 239.566723 21.5027039 239.535474 21.5027039M284.7427 21.5027039L277.746957 21.5027039C277.722555 21.5027039 277.702774 21.4829223 277.702774 21.4585203L277.702774 16.7529628C277.704793 16.7236517 277.695052 16.6947437 277.675705 16.6726325 277.656358 16.6505213 277.628998 16.637029 277.599679 16.6351398L271.112048 16.6351398C271.046976 16.6351398 270.994225 16.687891 270.994225 16.7529628L270.994225 41.5473478C270.994225 46.5106432 274.079715 50.1189737 278.358164 50.1189737L282.990082 50.1189737C283.055154 50.1189737 283.107905 50.0662225 283.107905 50.0011506L283.107905 46.1350823C283.10802 46.06872 283.05633 46.0137989 282.990082 46.0098953L280.147602 46.0098953C279.411208 46.0098953 277.717502 45.9657117 277.717502 42.3279254L277.717502 25.6117823C277.717502 25.5914473 277.733986 25.5749626 277.754321 25.5749626 279.889864 25.5749626 284.757428 25.5749626 284.757428 25.5749626 284.816872 25.5713501 284.864275 25.5239478 284.867887 25.4645035L284.867887 21.620527C284.867887 21.5582257 284.819608 21.5065977 284.757428 21.5027039M295.442504 21.50244L288.969601 21.50244C288.90453 21.50244 288.851778 21.5554551 288.851778 21.620527L288.851778 50.0011506C288.855416 50.0646548 288.906097 50.1153361 288.969601 50.1189737L295.442504 50.1189737C295.473753 50.1189737 295.503722 50.1065602 295.525818 50.0844641 295.547914 50.062368 295.560328 50.0323992 295.560328 50.0011506L295.560328 21.620527C295.562534 21.588653 295.550831 21.5573852 295.528238 21.534793 295.505646 21.5122008 295.474378 21.5004977 295.442504 21.50244M295.442504 12.5186973L288.969601 12.5186973C288.9073 12.5185757 288.855672 12.566977 288.851778 12.6291566L288.851778 18.0563802C288.855672 18.1185598 288.9073 18.1669611 288.969601 18.1668393L295.442504 18.1668393C295.473625 18.1714397 295.505142 18.1615798 295.528092 18.1400642 295.551042 18.1185486 295.562913 18.087732 295.560328 18.0563802L295.560328 12.6365205C295.560396 12.6059033 295.547753 12.5766312 295.525416 12.5556908 295.50308 12.5347503 295.473054 12.5240202 295.442504 12.5260614M340.215258 21.5027039L328.6686 21.5027039C328.606421 21.5065977 328.558141 21.5582257 328.558141 21.620527L328.558141 50.0011506C328.558141 50.0634519 328.606421 50.1150799 328.6686 50.1189737L335.156231 50.1189737C335.218411 50.1150799 335.266812 50.0634519 335.26669 50.0011506L335.26669 25.6338741C335.26382 25.6214943 335.267537 25.6085095 335.276523 25.5995235 335.285509 25.5905375 335.298494 25.5868205 335.310874 25.5896905L340.215258 25.5896905C341.548131 25.5896905 343.013555 25.8106087 343.941411 27.3496721 344.802992 28.7414567 345.185917 31.1862847 345.185917 35.0228973 345.185917 35.1922679 345.185917 50.0085146 345.185917 50.0085146 345.185795 50.0708158 345.234197 50.1224439 345.296376 50.1263376L351.754551 50.1263376C351.819623 50.1263376 351.872374 50.0735864 351.872374 50.0085146L351.872374 35.7666552C351.872374 29.0949258 350.546865 21.5027039 340.222622 21.5027039M312.07028 21.5027039C301.260017 21.5027039 299.875596 29.1317455 299.875596 35.8034749 299.875596 42.4752042 301.260017 50.1410655 312.07028 50.1410655 322.880544 50.1410655 324.257601 42.4825682 324.257601 35.8034749 324.257601 29.1243815 322.880544 21.5027039 312.07028 21.5027039M316.171995 44.1320907C315.155771 45.8110689 313.535704 46.0319871 312.07028 46.0319871 310.604856 46.0319871 308.992154 45.8110689 307.961202 44.1320907 307.033346 42.6593027 306.606237 39.9788287 306.606237 35.8034749L306.606237 35.8034749C306.606237 30.8769992 307.21008 28.0787021 308.565045 26.753193 309.375078 25.9431596 310.428122 25.6117823 312.07028 25.6117823 313.712439 25.6117823 314.772846 25.9431596 315.58288 26.753193 316.930481 28.0787021 317.534324 30.8917271 317.534324 35.8329306 317.534324 40.0082844 317.107215 42.6593027 316.171995 44.1615464M169.555955 21.5027005C169.529519 21.503295 169.505035 21.5167525 169.490367 21.5387545 169.475699 21.5607564 169.472694 21.5885328 169.482316 21.613163L179.055437 49.7360488C179.073828 49.80854 179.073828 49.8844758 179.055437 49.956967L173.650306 63.882177C173.650306 63.9484524 173.650306 64 173.716581 64L179.349995 64C179.424594 63.9971053 179.490708 63.9511132 179.519366 63.882177L196.375424 21.613163C196.375424 21.5468876 196.375424 21.5027005 196.301784 21.5027005L190.160258 21.5027005C190.090069 21.5069795 190.027872 21.5493866 189.998252 21.613163L182.862594 40.0966517C182.862594 40.1555632 182.811047 40.1555632 182.781591 40.0966517L176.485422 21.613163C176.463151 21.5468012 176.400778 21.5022483 176.33078 21.5027005L169.555955 21.5027005zM359.199494 43.852261C360.930092 43.8603859 362.3272 45.2684632 362.321805 46.9990718 362.316379 48.7296804 360.910495 50.1289948 359.17988 50.1263031 357.449265 50.1236036 356.047747 48.7199163 356.047728 46.9892993 356.018401 46.1460719 356.341539 45.328717 356.939546 44.7335036 357.537554 44.1382901 358.356414 43.8189846 359.199494 43.852261L359.199494 43.852261zM359.199494 49.6550454C360.279653 49.6639973 361.258441 49.0202157 361.678018 48.0248368 362.097594 47.029458 361.875009 45.8792685 361.11438 45.112283 360.353751 44.3452975 359.205454 44.1131492 358.206618 44.5244281 357.207782 44.935707 356.555877 45.9091032 356.55584 46.9892993 356.52903 47.7003143 356.798186 48.3906266 357.299209 48.8958365 357.800232 49.4010464 358.488281 49.6759381 359.199494 49.6550454L359.199494 49.6550454zM357.954989 45.1630422L359.427777 45.1630422C360.090531 45.1630422 360.576551 45.3618686 360.576551 46.1056265 360.601414 46.5226104 360.321063 46.8964119 359.913797 46.9892993L359.913797 46.9892993C360.149443 47.0482108 360.311449 47.2249453 360.429272 47.6446899 360.547095 48.0644345 360.679646 48.4326315 360.782742 48.7787366L360.097895 48.7787366C360.009528 48.5062709 359.891705 48.0423427 359.818065 47.7919687 359.71497 47.3722241 359.597147 47.2396732 359.081671 47.2396732L358.625107 47.2396732 358.625107 48.7787366 357.97708 48.7787366 357.954989 45.1630422zM358.603015 46.7904729L359.184767 46.7904729C359.641331 46.7904729 359.921161 46.6137384 359.921161 46.1939938 359.921161 45.7742492 359.582419 45.6269704 359.22895 45.6269704L358.625107 45.6269704 358.603015 46.7904729zM30.3259471 0L30.3259471 58.4328616 43.5810386 62.6229433 43.5810386 13.6306524C43.5810386 11.3183753 44.6119902 9.78667587 46.2615127 10.3168795 48.419147 10.9133586 48.8388916 13.0415372 48.8388916 15.3243585L48.8388916 34.8903463C57.0717761 38.8742377 63.566771 34.8903463 63.566771 24.3746404 63.566771 13.6232885 59.7669781 8.83672765 48.5811537 4.98538718 42.5987948 2.9680892 36.5032577 1.30343465 30.3259471 0"></path>\n                        <path d="M46.0774142 54.0807732L67.3223802 46.5180071C69.7303885 45.6269704 70.0985855 44.4192843 68.1471415 43.7786216 66.1956974 43.1379588 62.6462785 43.3146934 60.2161784 44.1910022L46.0774142 49.1763894 46.0774142 41.2380624 46.8874475 40.9729605C50.0900532 39.9378914 53.3924659 39.2418672 56.7403989 38.8963295 62.9381771 38.2714931 69.1974318 39.0259231 75.0692448 41.1055114 81.3138657 43.0864112 82.0134399 45.9804395 80.4301929 47.9907951 78.8469459 50.0011506 74.9440578 51.422391 74.9440578 51.422391L46.0774142 61.7319066 46.0774142 54.0807732zM6.09122155 53.2781038C-.308042054 51.4886664-1.37581331 47.7256932 1.54030681 45.553331 4.23550875 43.5650673 8.83797106 42.0701876 8.83797106 42.0701876L27.7706601 35.3469106 27.7706601 43.0054079 14.1473716 47.8656081C11.7319994 48.727189 11.3711663 49.9422391 13.3152464 50.5829019 15.2593265 51.2235646 18.8087454 51.0615579 21.2241177 50.1705212L27.7706601 47.8656081 27.7706601 54.7361638 26.4525148 54.9497181C19.6304625 56.0564592 12.6414229 55.4826754 6.09122155 53.2781038zM75.9455536 56.3635945C77.6720845 56.3717195 79.065895 57.7764998 79.0605004 59.5030413 79.0550745 61.2295828 77.6524875 62.6256004 75.9259395 62.6229087 74.1993916 62.6202092 72.8011705 61.2198189 72.8011514 59.4932689 72.7718192 58.6519939 73.0941792 57.8365086 73.6908075 57.2426748 74.2874359 56.6488409 75.1044256 56.3303131 75.9455536 56.3635945zM75.9455536 62.1590151C77.0257126 62.167967 78.0045 61.5241853 78.4240766 60.5288064 78.8436532 59.5334276 78.6210686 58.3832381 77.8604394 57.6162526 77.0998101 56.8492672 75.9515128 56.6171188 74.9526768 57.0283977 73.9538409 57.4396766 73.3019364 58.4130728 73.3018993 59.4932689 73.2750888 60.2042839 73.5442453 60.8945963 74.0452684 61.3998062 74.5462915 61.9050161 75.2343401 62.1799078 75.9455536 62.1590151L75.9455536 62.1590151zM74.7084117 57.6743758L76.1370161 57.6743758C76.7997706 57.6743758 77.2931546 57.8658382 77.2931546 58.6095961 77.3173498 59.0288256 77.0332482 59.403465 76.6230361 59.4932689L76.6230361 59.4932689C76.8586821 59.5521804 77.0280528 59.728915 77.1458758 60.1486595 77.2636988 60.5684041 77.3962497 60.9366011 77.4993449 61.2827062L76.8365903 61.2827062C76.7408591 61.0102405 76.6230361 60.5463123 76.5493967 60.2959383 76.4463015 59.8761938 76.3284785 59.7436428 75.8130027 59.7436428L75.3858942 59.7436428 75.3858942 61.2827062 74.7378675 61.2827062 74.7084117 57.6743758zM75.3564384 59.2944425L75.9308257 59.2944425C76.38739 59.2944425 76.6672197 59.117708 76.6672197 58.6979634 76.6672197 58.2782188 76.3284785 58.1309401 75.9750094 58.1309401L75.3564384 58.1309401 75.3564384 59.2944425z"></path>\n                    </g>\n                </svg>\n            </div>\n        <h2 class="txt-style-large-title txt-block-title__title">'.concat(e,"</h2>\n        </div>\n        ");
},bt=function(e){return e.map(function(e,t){return"\n                <div data-locale=".concat(e.localeCode,' class="country-selector__country" tabindex="0" role="button" data-position="').concat(t+1,'" data-label="').concat(e.countryName,'">\n                <p class="txt-style-secondary m--none">').concat(e.countryName,"</p>\n                </div>\n                ")}).join("")},_t=function(e){return e.regions.map(function(e){return'\n                <div class="country-selector__region" role="region" aria-label="Americas">\n                    <p class="txt-style-medium-title country-selector__region-title">'.concat(e.regionName,'</p>\n\n                    <div class="mesh-row country-selector__countries">\n                        ').concat(bt(e.countries),"\n                    </div>\n                </div>\n                ")}).join("")},Ct=function(e){return $("#gdk__content").append('\n        <div class="country-selector" data-component="country-selector" role="dialog" aria-modal="true" aria-label="'.concat(e.overlayTitle,'">\n            <div class="country-selector__header">\n                <div role="button" tabindex="0" class="country-selector__close" aria-label="Close">\n                    ').concat(yt(e.closeSpritePath),'\n                </div>\n            </div>\n            <div class="country-selector__content">\n                <div class="mesh-container mb--none">\n                    <div class="mesh-row justify-content--center">\n                        <div class="mesh-col-10">\n                            ').concat(kt(e.overlayTitle),'\n                        </div>\n                        <div class="mesh-col-10 country-selector__regions">\n                            ').concat(_t(e),"\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        "))},Tt=function(){var e=I("country");return e},wt=function(){return"/content.country-selector.json/?locale=".concat(_gpdc.config.locale,"&userCountry=").concat(Tt())},At='[data-component="country-selector"]',Et=function(){var e=$(".site-footer-v2 .site-footer-v2__country-btn");e.length&&e.on("click.dkCS",Lt)},Lt=function(e){e.stopPropagation();var t=$(At);return t.length?void It(t,$(e.currentTarget)):void $.ajax({type:"GET",url:wt(),crossDomain:!0,xhrFields:{withCredentials:!0},success:function(n){Ct(n),t=$(At),It(t,$(e.currentTarget)),t.find(".country-selector__country[data-locale]").on("click.dkCS",St)},error:function(e){_gpdc.Logger.log("Unable to contact API.")}})},It=function(e,t){var n=e.find(".country-selector__close");e.addClass("show"),Q("addClass",e),n.on("click.dkCS",function(){return $t(e,t,n)}),_gpdc.elements.$document.on("keyup.dkCS",function(a){a.stopPropagation(),"Escape"!==a.key&&"Esc"!==a.key&&27!==a.keyCode||$t(e,t,n)}),setTimeout(function(){return n.focus()},0)},$t=function(e,t,n){e.removeClass("show"),Q("removeClass",e),n.off("click.dkCS"),_gpdc.elements.$document.off("keyup.dkCS"),setTimeout(function(){return t.focus()},0)},St=function(e){var t=e.currentTarget,n=$(t),a=new URL(location.href),i=a.searchParams;i.set("country-selector","true"),a.search=i.toString();var o=n.data(),r=o.locale,s=o.position,c=o.label,l=a.toString().replace(_gpdc.config.locale,r);_gpdc.analytics.event.addGDLEvent("click","select country",{label:c,linkUrl:l,position:s,elementType:"link",userActionFlag:!1,moduleName:"countryselector",assetName:A.EMPTY_LABEL},n),_gpdc.analytics._satelliteTrack("user_engagement"),location.assign(l)},xt=function(e,t){_gpdc.elements.$html.attr("data-hotspot-modal-active",e),t.closest(".gpdc-section, .page-section")[e?"addClass":"removeClass"]("image-hotspots-section"),t.parents(".cmp-container")[e?"addClass":"removeClass"]("image-hotspots-cmp-container")},Pt=function(e){var t=e.data("html");if(t)return t;var n=e.data("item-index"),a=e.data("$template").html(),i=$(a).find('[data-item-index="'.concat(n,'"]')).html();return e.data("html",i),i},Mt=function(e){var t=e.match(/([0-9]+,[0-9]+)/g).map(function(e){return e.split(",")}),n=t.map(function(e){return e[0]}),a=t.map(function(e){return e[1]});return[(Math.min.apply(Math,c(n))+Math.max.apply(Math,c(n)))/2,(Math.min.apply(Math,c(a))+Math.max.apply(Math,c(a)))/2]},Dt=new le,Ot=function(e){var t=$(".image-hotspots--active"),n=t.data(),a=n.trap;a.isExcluded()||"Escape"!==e.key&&"Esc"!==e.key&&27!==e.keyCode||(e.stopPropagation(),t.find(".image-hotspots__sidebar .image-hotspots__close").trigger("click"))},Nt=function(e){var t=$(e.currentTarget).closest(".image-hotspots");t.addClass("image-hotspots--expanded"),t.find(".image-hotspots__pin--active").removeClass("image-hotspots__pin--active"),xt(!0,t);var n=t.find(".image-hotspots__container"),a=n.find(".media-block");n.scrollTop((a.height()-n.height())/2),n.scrollLeft((a.width()-n.width())/2)},Bt=function(e){e.preventDefault();var t=$(e.currentTarget).closest(".image-hotspots");t.removeClass("image-hotspots--active image-hotspots--expanded"),t.find(".image-hotspots__pin--active").removeClass("image-hotspots__pin--active"),xt(!1,t),_gpdc.elements.$document.off("keyup.DKImageHotspots",Ot);var n=t.data(),a=n.trap;a&&(a.destroy(),t.data("trap",null))},Gt=function(e){var t=$(e.currentTarget),n="image-hotspots__pin--active",a=t.data(),i=a.$component,o=a.$sidebar;if(!t.hasClass(n)){_gpdc.analytics.event.addGDLEvent("click","select image hotspot",{moduleName:"image-hotspots",elementType:"button",assetName:A.EMPTY_LABEL,linkUrl:A.EMPTY_LABEL,label:t.attr("aria-label"),userActionFlag:!0},t);var r=Pt(t),s=i.data("age-gate-unlocked")===!0||i.hasClass("image-hotspots--side")?$([]):$(r).find('[data-age-gated="true"]'),c=Dt.isGated(s.eq(0));Dt.triggerIfNeeded(s.eq(0)).then(function(){if(i.addClass("image-hotspots--active"),!i.hasClass("image-hotspots--side")&&c&&i.data("age-gate-unlocked",!0),t.addClass(n).siblings().removeClass(n),o.html('\n            <div class="'.concat(w.IS_MAX_TABLET?"slideInUp--fast":"fadeIn",' image-hotspots__content" aria-live="polite">\n                ').concat(r,"\n            </div>\n        ")),i.data("age-gate-unlocked")===!0&&o.find('[data-age-gated="true"]').attr("data-age-gated",!1),w.IS_MAX_TABLET){var e=o.find(".image-hotspots__content .box");e.scrollTop(0),setTimeout(function(){return e.removeClass("slideInUp--fast")},410)}else o.scrollTop(0);_gpdc.components.lozad._observer.observe(),new _gpdc.components.InlineVideo(o).init(),new _gpdc.components.ImageBlock(o).init(),o.find(".btn--cta").on("click.DKImageHotspots",function(e){var t=$(e.currentTarget),n=t.data("track-js");n&&(n.attributes.moduleName="image-hotspots".concat(w.IS_TABLET_LG&&type.length?"-".concat(type[0].replace("image-hotspots--","")):""),_gpdc.analytics.event.addGDL("raw","select image button",n,t))}),i.hasClass("image-hotspots--side")||setTimeout(function(){xt(!0,i);var e=new ke(o);e.autoFocusFirstItem(),i.data("trap",e),_gpdc.elements.$document.on("keyup.DKImageHotspots",Ot)},100)}).catch(function(){})}},Rt=function(e){"Enter"===e.key&&$(e.target).trigger("click")},Ft=function(e){var t=$(e.target);t.closest(".image-hotspots").data("age-gate-unlocked",!0)},Ut=function(e){var t=$(e.target);if(t.hasClass("image-hotspots__sidebar")){if(!w.IS_MAX_TABLET)return void $(".image-hotspots__close").trigger("click");var n=$(".image-hotspots__content");n.addClass("slideOutDown--fast"),n.removeAttr("style"),setTimeout(function(){t.removeAttr("style"),t.closest(".image-hotspots").removeClass("image-hotspots--active"),$(".image-hotspots__pin--active").removeClass("image-hotspots__pin--active")},400)}},Vt=!1,jt=function(e){Ge=e.originalEvent.touches[0].clientY},Ht=function(e){var t=Math.abs(Ge-Re),n=$(".image-hotspots__sidebar"),a=$(".image-hotspots__content"),i=a.find(".box");t>=100&&Vt&&i.scrollTop()<=0?(Vt=!1,Ge=null,Re=null,n.css("--slide-out-start",t),a.addClass("slideOutDown--fast"),a.removeAttr("style"),setTimeout(function(){n.removeAttr("style"),n.closest(".image-hotspots").removeClass("image-hotspots--active"),$(".image-hotspots__pin--active").removeClass("image-hotspots__pin--active")},400)):Vt&&(Vt=!1,a.removeAttr("style"),n.css({"--slide-in-start":t,"--slide-in-start-opacity":1}),a.addClass("slideInUp--fast"),setTimeout(function(){a.removeClass("slideInUp--fast"),n.removeAttr("style")},400))},zt=function(e){var t=e.originalEvent.touches[0].clientY;if(t>Re){var n=$(".image-hotspots__content"),a=n.find(".box"),i=a.scrollTop();0!==i||Vt||(Vt=!0,Ge=t),i<=0&&n.attr("style","transform: translate3d(0, ".concat(Math.abs(Ge-t),"px, 0) !important"))}Re=t},Kt=function(e,t){var n=$(t),a=n.find(".image-hotspots__area"),i=n.find(".image-hotspots__sidebar"),o=n.find(".image-hotspots__template"),r=n.data(),c=r.width,l=r.height,d=a.find(".image-hotspots__pin");n.css({"--image-width":"".concat(c,"px"),"--image-height":"".concat(l,"px")}),d.on("click.DKImageHotspots",Gt),n.on("click.DKImageHotspots",".image-hotspots__close",Bt),n.on("click.DKImageHotspots",".image-hotspots__mobile-close",Bt),n.on("click.DKImageHotspots",".image-hotspots__poster",Nt),i.on("click.DKImageHotspots",Ut),i.on("success.psAgeGate.attr",".media-block",Ft),w.IS_MAX_TABLET&&(i.on("keyup.DKImageHotspots",Rt),i.on("touchstart.DKImageHotspots",jt),i.on("touchend.DKImageHotspots",Ht),i.on("touchmove.DKImageHotspots",zt)),d.each(function(e,t){var a=$(t),r=Mt(a.data("coordinates")),d=s(r,2),u=d[0],g=d[1];a.css({left:"".concat(Math.round(u/c*100),"%"),top:"".concat(Math.round(g/l*100),"%")}),a.data({$template:o,$sidebar:i,$component:n})}),n.removeClass("image-hotspots--loading")},Wt=function(){var e=$('[data-component="image-hotspots"]');e.length&&(_gpdc.Logger.logInitializer("core","components","Image Hotspots"),e.each(Kt))},Yt=function(){function t(n){e(this,t),this.$context=n}return n(t,[{key:"init",value:function(){var e=this,t=M($('[data-component="cards"]'),this.$context);t.length&&($.each(t,function(t,n){var a=$(n),i=a.find('a[data-component="card"]'),o="mcp-data-collection"===a.data("module-name"),r=null;o&&(r=e.addMCPImpressionTracking(a,i)),e.addClickListener(i,o,r)}),_gpdc.Logger.logInitializer("core","components","CardCollection"))}},{key:"addMCPImpressionTracking",value:function(e,t){var n=this,a=e.find(".carousel");if(!a.length)return null;var i=t.map(function(e,t){return $(t).attr("data-mcp-product-id")}),o={experienceId:a.data("mcp-experience-id"),stat:"Impression",control:!1,catalog:{Product:i}},r=new Waypoint({element:e.get(0),handler:function(){n.salesForceSendStat(o),r.destroy()},offset:"20%"});return o}},{key:"addClickListener",value:function(e,t,n){var a=this;e.on("click.dkCardCollection",function(e){var i=$(e.currentTarget),r="_blank"===i.attr("target"),s=i.data("track-js");if((s||t)&&(r||(e.preventDefault(),e.stopPropagation()),s&&(t&&(s.attributes.moduleName+="-recommendations"),_gpdc.analytics.event.addRawEvent(i,s.eventInfo,s.attributes),_gpdc.analytics._satelliteTrack("user_engagement")),t&&n&&a.salesForceSendStat(o(o({},n),{},{stat:"Clickthrough",catalog:{Product:[i.data("mcp-product-id")]}})),!r)){var c=i.attr("href");B(c)&&(window.location.href=c)}})}},{key:"salesForceSendStat",value:function(e){try{SalesforceInteractions.mcis.sendStat({campaignStats:[e]})}catch(e){_gpdc.Logger.log("CardCollection::SF Tracking error",e)}}}]),t}(),qt=function(){function t(){e(this,t)}return n(t,[{key:"trackCellEvent",value:function(e,t){_gpdc.analytics.event.addGDLEvent("click","select image",{userActionFlag:!1,moduleName:"highlights-carousel",label:A.EMPTY_LABEL,position:e.data("analytics-position"),linkUrl:t||A.EMPTY_LABEL,assetName:e.data("analytics-asset")||A.EMPTY_LABEL,elementType:"image"},e)}},{key:"onCellClick",value:function(e){var t=e.currentTarget,n=$(t),a=n.attr("href")||"";this.trackCellEvent(n,a),_gpdc.analytics._satelliteTrack("asset_click")}},{key:"processHiglightsCarousel",value:function(e){var t=this;$.each(e,function(e,n){var a=$(n),i=a.find(".simple-carousel-cell");i.data("analytics-position",e+1),i.on("click.dkHighlightsCarouselComponent",t.onCellClick.bind(t))})}},{key:"init",value:function(){var e=$(".highlights-carousel");this.processHiglightsCarousel(e),_gpdc.Logger.logInitializer("core","components","HighlightsCarousel")}}]),t}(),Xt=function(){$('[data-component="blog-feed"]').on("click.BlogFeed",".blog-post",function(e){var t=$(e.currentTarget);_gpdc.analytics.event.addGDLEvent("click","select blog image",{moduleName:"blog feed",elementType:"image",assetName:A.EMPTY_LABEL,linkUrl:t.attr("href").includes("http")?t.attr("href"):A.EMPTY_LABEL,label:t.find("h4").text()||A.EMPTY_LABEL,userActionFlag:!0,position:t.index()+1},t),_gpdc.analytics._satelliteTrack("user_engagement")})},Jt=function(){function t(){e(this,t),this.init()}return n(t,[{key:"initModules",value:function(){pt();var e=new Ie,t=(new pe,new fe),n=new Ce,a=new Je,i=new xe,o=new le,r=new Ye,s=(new qe,new Qe),c=new Ze,l=new et,d=new tt,u=new at,g=new Y,h=new nt,p=new it,f=new rt,v=new st,m=new ct,y=new lt,k=new Yt,b=new qt;f.init(),v.init(),o.init(),a.init(),i.init(),r.init(),s.init(),c.init(),l.init(),d.init(),e.init(),t.init(),n.init(),u.init(),h.init(),p.init(),m.init(),y.init(),k.init(),b.init(),Xt(),dt(),ht(),ft(),Et(),Wt(),g.retrieve(),o.updateSignInLink("body")}},{key:"init",value:function(){var e=this,t=new Xe;t.init(),_gpdc.components.AgeGate=le,_gpdc.components.BGBlock=Le,_gpdc.components.ImageBlock=Ee,_gpdc.components.InlineVideo=we,_gpdc.components.VideoBlock=Ae,_gpdc.components.VideoButton=Oe,_gpdc.components.YTEmbedVideo=ue,_gpdc.components.VideoPlayer=de,_gpdc.components.Carousel=fe,_gpdc.components.Slider=ot,_gpdc.components.MediaLightbox=pe,_gpdc.components.CarouselSimple=Ce,_gpdc.components.Pagination=rt,_gpdc.components.CardCollection=Yt,_gpdc.components.HighlightsCarousel=qt,window._gpdc&&_gpdc.user&&"undefined"!=typeof _gpdc.user.isLoggedIn?this.initModules():_gpdc.elements.$document.one("userInfoSet.dkComponents",function(){return e.initModules()})}}]),t}(),Qt=function(e){try{return/\i\m\g\/([^=]+)/.exec(e[0].currentSrc)[1]}catch(e){return A.EMPTY_LABEL}},Zt=function(){$(".rawhtml div[data-crl8-container-id]").on("click.BazaarVoice",'button[type="button"]',function(e){var t=$(e.currentTarget);_gpdc.analytics.event.addGDLEvent("click","select image",{moduleName:"BazaarVoice gallery",elementType:"image",assetName:Qt(t.find("img")),linkUrl:A.EMPTY_LABEL,label:A.EMPTY_LABEL,userActionFlag:!1,position:t.closest('div[role="listitem"]').index()+1},t),_gpdc.analytics._satelliteTrack("asset_click")})};!function(e){var t=window;t.sharedNav&&sharedNav.setPublicUrl&&t.sharedNav.setPublicUrl("/etc.clientlibs/global_pdc/clientlibs/clientlibs-jetstream/resources"),_gpdc.components={},_gpdc.elements.$document.ready(function(){t._dkDebug=!1;var e=new G;new R,new Jt,new F;e.bind(),e.init(),Zt()})}(jQuery)}();
